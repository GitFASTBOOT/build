{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "046ee9ad_0b06f32c",
        "filename": "tools/releasetools/apex_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 91,
      "author": {
        "id": 1710792
      },
      "writtenOn": "2022-11-09T17:51:30Z",
      "side": 0,
      "message": "Is it intentional that we remove --fsckerofs_path here? Why?",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 56
      },
      "revId": "56a6905d86ab7267e73ffda4c15a8dd01284e5bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42bab490_da3029c8",
        "filename": "tools/releasetools/apex_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 91,
      "author": {
        "id": 1882770
      },
      "writtenOn": "2022-11-09T18:13:46Z",
      "side": 0,
      "message": "we only need it for extract operations. previously, I was trying to be uniform, but it is unnecessarily restrictive",
      "parentUuid": "046ee9ad_0b06f32c",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 56
      },
      "revId": "56a6905d86ab7267e73ffda4c15a8dd01284e5bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c0e9e14a_81d512dc",
        "filename": "tools/releasetools/apex_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 91,
      "author": {
        "id": 1710792
      },
      "writtenOn": "2022-11-09T18:17:36Z",
      "side": 0,
      "message": "Reading the commit message and code, there\u0027s few things I don\u0027t understand:\n\nWhy does deapexer need blkid now? It sounds like invoking blkid directly in deapexer yields some kind of security error. But invoking a passed in blkid binary does not? please clarify.\n\nYou are removing `fsckerofs_path` dependency from `deapexer` . Why? It seems unrelated to this change. Please clarify that in commit message and/or move that to a separate CL.",
      "parentUuid": "42bab490_da3029c8",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 56
      },
      "revId": "56a6905d86ab7267e73ffda4c15a8dd01284e5bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47a2b88d_4c3c927c",
        "filename": "tools/releasetools/apex_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 91,
      "author": {
        "id": 1882770
      },
      "writtenOn": "2022-11-09T18:28:03Z",
      "side": 0,
      "message": "I have updated the commit message. The main reason we need blkid is to support EROFS signing. During signing of EROFS apexes, we need to expand the payload image. blkid is used to determine filesystem type, if it is ext4, then debugfs_static is used, if it is EROFS, then fsck.erofs is used.\n\nCould you help me understand the security error related to blkid call? Today deapexer is already calling into some c binaries like debugfs_static that we passed in, would that also has security error implications?",
      "parentUuid": "c0e9e14a_81d512dc",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 56
      },
      "revId": "56a6905d86ab7267e73ffda4c15a8dd01284e5bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6f26dab_69d8ef35",
        "filename": "tools/releasetools/apex_utils.py",
        "patchSetId": 2
      },
      "lineNbr": 91,
      "author": {
        "id": 1710792
      },
      "writtenOn": "2022-11-09T18:30:29Z",
      "side": 0,
      "message": "Looking at b/255963179, I saw\n\n```\nDisallowed PATH tool \"blkid\" used: []string{\"blkid\", \"-o\", \"value\", \"-s\", \"TYPE\", \"/buildbot/src/googleplex-android/stage-aosp-master/out/soong/.temp/tmpk0hdl9ns/apex_payload.img\"}\n```\n\nSo I assumed that invoking blkid is disallowed by some system. Ignore my comments about security if this error is irrelevant.",
      "parentUuid": "47a2b88d_4c3c927c",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 56
      },
      "revId": "56a6905d86ab7267e73ffda4c15a8dd01284e5bb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}