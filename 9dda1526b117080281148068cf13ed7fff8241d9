{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4559460a_a6d9779b",
        "filename": "tools/aconfig/aconfig_storage_read_api/srcs/android/aconfig/storage/AconfigStorageReadAPI.java",
        "patchSetId": 5
      },
      "lineNbr": 32,
      "author": {
        "id": 1064003
      },
      "writtenOn": "2024-05-28T18:01:58Z",
      "side": 1,
      "message": "Is there a prototype/representative follow-up change that shows how the various flag-codegen targets will use this?",
      "range": {
        "startLine": 32,
        "startChar": 13,
        "endLine": 32,
        "endChar": 34
      },
      "revId": "9dda1526b117080281148068cf13ed7fff8241d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "724f4a3b_dade2d25",
        "filename": "tools/aconfig/aconfig_storage_read_api/srcs/android/aconfig/storage/AconfigStorageReadAPI.java",
        "patchSetId": 5
      },
      "lineNbr": 32,
      "author": {
        "id": 1882770
      },
      "writtenOn": "2024-05-28T18:36:12Z",
      "side": 1,
      "message": "Not at the moment, the closest is the test added in this cl: AconfigStorageReadAPITest.java, the test mimics how these apis will be used in codegen.",
      "parentUuid": "4559460a_a6d9779b",
      "range": {
        "startLine": 32,
        "startChar": 13,
        "endLine": 32,
        "endChar": 34
      },
      "revId": "9dda1526b117080281148068cf13ed7fff8241d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f526391e_936737e4",
        "filename": "tools/aconfig/aconfig_storage_read_api/srcs/android/aconfig/storage/AconfigStorageReadAPI.java",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1064003
      },
      "writtenOn": "2024-05-28T18:01:58Z",
      "side": 1,
      "message": "I\u0027m wondering at what point we would consider making this a system API? As it stands, every downstream target will need to statically link this support Java wrapper *and* the underlying JNI libraries.  Any reason not to have a fairly generic framework/system/mainline API that implements this?",
      "range": {
        "startLine": 86,
        "startChar": 28,
        "endLine": 86,
        "endChar": 61
      },
      "revId": "9dda1526b117080281148068cf13ed7fff8241d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d34c7a8_8c8e434b",
        "filename": "tools/aconfig/aconfig_storage_read_api/srcs/android/aconfig/storage/AconfigStorageReadAPI.java",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1882770
      },
      "writtenOn": "2024-05-28T18:36:12Z",
      "side": 1,
      "message": "The flag storage files are created (serialized) using Rust, so it is better if we use the same Rust api to deserialize it, so that we don\u0027t have to worry about language differences like string encoding (Rust uses UTF-8, java uses UTF-16), endianness and etc. The c++ implementation also wraps around the rust implementation for the same reason.\n\nI\u0027m open to the possibility of creating a java native implementation down the road. But for the first iteration, wrap around a single Rust implementation is the most robust approach and avoids potential code duplication.",
      "parentUuid": "f526391e_936737e4",
      "range": {
        "startLine": 86,
        "startChar": 28,
        "endLine": 86,
        "endChar": 61
      },
      "revId": "9dda1526b117080281148068cf13ed7fff8241d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbf878cb_f9f21f2a",
        "filename": "tools/aconfig/aconfig_storage_read_api/srcs/android/aconfig/storage/AconfigStorageReadAPI.java",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1882770
      },
      "writtenOn": "2024-05-28T18:38:27Z",
      "side": 1,
      "message": "@zhidou@google.com and I were looking at the native lib the java lib depends on, there are definitely ways we can shrink its size.",
      "parentUuid": "3d34c7a8_8c8e434b",
      "range": {
        "startLine": 86,
        "startChar": 28,
        "endLine": 86,
        "endChar": 61
      },
      "revId": "9dda1526b117080281148068cf13ed7fff8241d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}