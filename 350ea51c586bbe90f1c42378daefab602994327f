{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a329e1df_f5f934d9",
        "filename": "core/dex_preopt_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-11-17T13:15:08Z",
      "side": 1,
      "message": "Why is this in the dexpreopt config? It\u0027s true it affects dexpreopt, but it also has a big impact even if dexpreopting is disabled.",
      "revId": "350ea51c586bbe90f1c42378daefab602994327f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cf4af63d_b81230e7",
        "filename": "core/dex_preopt_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-11-17T13:58:03Z",
      "side": 1,
      "message": "I tried putting this code in `build/make/target/product/runtime_libart.mk` but it didn\u0027t work because the code depends on PRODUCT_SHIPPING_API_LEVEL which is not resolved there.\n\nMeanwhile, this code is highly related to dexpreopting. The motivation to make the build system GC-type aware is that we can save some space by not emitting read barrier when we dexpreopt if we know that the device is going to use userfaultfd GC.\n\nIf you know a better place to put this code, please let me know.",
      "parentUuid": "a329e1df_f5f934d9",
      "revId": "350ea51c586bbe90f1c42378daefab602994327f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3484c088_aa00b266",
        "filename": "core/dex_preopt_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-11-17T14:17:56Z",
      "side": 1,
      "message": "Right, the Soong flag is only used for dexpreopting, so this line is ok. However, the property setting on 119 above doesn\u0027t belong in this file.\n\nOrdering in the make system is a headache, I don\u0027t know where it should go. If nothing else, cramming it into main.mk somewhere around where it calls dex_preopt.mk seems better in this regard.\n\nIt is a bit odd that product mk files cannot query the API level. I suggest looping in a make system expert for advice. Looks like you need one for ORV on product.mk anyway.",
      "parentUuid": "cf4af63d_b81230e7",
      "revId": "350ea51c586bbe90f1c42378daefab602994327f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}