{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f95c33da_50409be9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2021-03-09T03:52:40Z",
      "side": 1,
      "message": "This isn\u0027t supposed to matter because nothing is supposed to depend on the build number file, it is supposed to get read as a side effect.  What are you seeing rebuild without this patch?",
      "revId": "4db76c8f14dd3f998aa4cfd654177e93189e8298",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b63ccaa_fa3cc541",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1140383
      },
      "writtenOn": "2021-03-09T05:11:16Z",
      "side": 1,
      "message": "Let me use a code snippet to show an example:\n\n$ cat Makefile\nX :\u003d $(file \u003cbuild_number.txt)\nall:\n        @echo X\u003d$(X)\n\n$ cat build_number.txt\n123\n\n$ ckati --ninja --regen -f Makefile\n./build.ninja is missing, regenerating...\n\n$ ckati --ninja --regen -f Makefile\nNo need to regenerate ninja file\n\n$ touch build_number.txt\n\n$ ckati --ninja --regen -f Makefile\n$(file \u003cbuild_number.txt) was changed, regenerating...\n\nIn the last command, regeneration of build.ninja is not expected, because its content is not changed. It seems ckati will also check timestamp for \"$(file \u003c)\" function.",
      "parentUuid": "f95c33da_50409be9",
      "revId": "4db76c8f14dd3f998aa4cfd654177e93189e8298",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f871984_9b08b84e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1140383
      },
      "writtenOn": "2021-03-09T05:38:56Z",
      "side": 1,
      "message": "ckati code is in https://github.com/google/kati/blob/master/src/regen.cc#L364",
      "parentUuid": "5b63ccaa_fa3cc541",
      "revId": "4db76c8f14dd3f998aa4cfd654177e93189e8298",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4a50ae52_aac4c0f3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2021-03-09T06:03:14Z",
      "side": 1,
      "message": "I thought we never read BUILD_NUMBER_FROM_FILE directly, but we have to in order to change the FILE_NAME_TAG when it is explicitly set.  We\u0027ve optimized the case where BUILD_NUMBER is not set, but not the case when BUILD_NUMBER is set because it would never be the same in any of our infrastructure builds.  This patch seems fine to optimize that case.",
      "parentUuid": "9f871984_9b08b84e",
      "revId": "4db76c8f14dd3f998aa4cfd654177e93189e8298",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95d2b962_a220b11f",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2021-03-09T06:03:14Z",
      "side": 1,
      "message": "Can you wrap this line with \\ escaping, and indent the commands inside the if and else?",
      "revId": "4db76c8f14dd3f998aa4cfd654177e93189e8298",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7f3a2f0_8c365c6d",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1140383
      },
      "writtenOn": "2021-03-09T06:12:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "95d2b962_a220b11f",
      "revId": "4db76c8f14dd3f998aa4cfd654177e93189e8298",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}