{
  "comments": [
    {
      "key": {
        "uuid": "477a285a_8658ff07",
        "filename": "core/binary.mk",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-06-01T04:14:01Z",
      "side": 1,
      "message": "I\u0027m a little worried that this negative will lead to lld enabling packed relocations at different times than relocation packer.  Should this be:\n\n my_target_global_ldflags +\u003d -Wl,--pack-dyn-relocs\u003d$(if $(filter true,$(my_pack_module_relocations)),android,none)\n\nThat may cause other problems, because you would be enabling relocation packer for module types that didn\u0027t come through dynamic_binary.mk, including static libraries and static binaries.",
      "revId": "289e8d601120b8b33e223ee41699d45afeca21e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "167fbb27_24258008",
        "filename": "core/binary.mk",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2018-06-01T17:55:45Z",
      "side": 1,
      "message": "Isn\u0027t the assumption that my_pack_module_relocations can be either \u0027true\u0027 or \u0027false\u0027? I see also global variables set to make this true and some projects can make it false.\nSo current lld\u0027s global default ldflags contain --pack-dyn-relocs\u003dandroid, set in build/soong/cc/config/global.go.\nHere we only need to override global default when my_pack_module_relocations is false.\nAdding --pack-dyn-relocs\u003dandroid here will be duplication.\n\nDo we use ld or lld in static libraries?\n\nFor static binaries, the --pack-dyn-relocs should have no effect, right?",
      "parentUuid": "477a285a_8658ff07",
      "revId": "289e8d601120b8b33e223ee41699d45afeca21e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "16f9b736_7664f0cc",
        "filename": "core/binary.mk",
        "patchSetId": 6
      },
      "lineNbr": 524,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-06-01T18:44:43Z",
      "side": 1,
      "message": "Oh, that\u0027s fine then.  You could move the \u003dandroid here instead of the global options if you want to.\n\nld is used for static executables.",
      "parentUuid": "167fbb27_24258008",
      "revId": "289e8d601120b8b33e223ee41699d45afeca21e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e891fac3_8f88c00f",
        "filename": "core/dynamic_binary.mk",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-06-01T04:14:01Z",
      "side": 1,
      "message": "you can just do relocation_packer_output :\u003d $(relocation_packer_input) here",
      "revId": "289e8d601120b8b33e223ee41699d45afeca21e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f83fa11a_282a8fd4",
        "filename": "core/dynamic_binary.mk",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2018-06-01T18:12:15Z",
      "side": 1,
      "message": "I suppose that you also suggest this change made to line 58, right?",
      "parentUuid": "e891fac3_8f88c00f",
      "revId": "289e8d601120b8b33e223ee41699d45afeca21e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b68b4dab_52b386af",
        "filename": "core/dynamic_binary.mk",
        "patchSetId": 6
      },
      "lineNbr": 63,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-06-01T18:44:43Z",
      "side": 1,
      "message": "This is fine then since it mirrors the existing behavior.",
      "parentUuid": "f83fa11a_282a8fd4",
      "revId": "289e8d601120b8b33e223ee41699d45afeca21e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}