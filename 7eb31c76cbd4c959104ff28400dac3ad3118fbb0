{
  "comments": [
    {
      "key": {
        "uuid": "6b3926b8_72a42956",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2016-09-15T22:02:29Z",
      "side": 1,
      "message": "Should we define the key per partition?\ne.g.,\n - BOARD_SYSTEM_AVB_ALGORITHM\n - BOARD_SYSTEM_AVB_KEY_PATH\n - BOARD_VENDOR_AVB_ALGORITHM\n - BOARD_VENDOR_AVB_KEY_PATH\n\nIf it\u0027s not set, use BOARD_AVB_ALGORITHM/BOARD_AVB_KEY_PATH for all partitions.\n\nIn Android, the verified partitions will be: /boot, /system, /vendor (optional for now) and /odm (optional for now, currently built by build_custom_images.mk).\n\nWe probably also need to add the support for signing vendor partition, this could be another CL though.",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 34,
        "endChar": 52
      },
      "revId": "7eb31c76cbd4c959104ff28400dac3ad3118fbb0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90d3ebea_d2876410",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2016-09-19T15:16:44Z",
      "side": 1,
      "message": "I thought about doing that but decided not to.\n\nThe reason is that avbtool gives so much flexibility that I don\u0027t think we\u0027d be able to capture all possible use-cases through BOARD_*AVB* variables in the build system. That\u0027s also why it\u0027s easy to erase AVB metadata, both footers (\u0027avbtool erase_footer\u0027) and the entire vbmeta.img file. E.g. the tools have been designed with \"someone will need to re-sign images and/or inject metadata down the road\" in mind.\n\nFor example, for the use case you mention - partitions \u0027system\u0027 and \u0027vendor\u0027 being signed by different keys - the individual artifacts (\u0027system\u0027 and \u0027vendor\u0027) will come from different entities and thus different build systems. So they wouldn\u0027t use this feature anyway. Extrapolating, I think the assumption that only a single key-par per build system is somewhat sound.\n\nThat said, if you have good use-cases I don\u0027t mind adding this - I just like to keep things simple to begin with!",
      "parentUuid": "6b3926b8_72a42956",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 34,
        "endChar": 52
      },
      "revId": "7eb31c76cbd4c959104ff28400dac3ad3118fbb0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b3926b8_99ed27b8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2016-09-19T18:26:01Z",
      "side": 1,
      "message": "OK, SGTM for now.\nI\u0027ll see if partners have any feedback on this and decide what to do next.\n\nThanks for the detailed comments!",
      "parentUuid": "90d3ebea_d2876410",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 34,
        "endChar": 52
      },
      "revId": "7eb31c76cbd4c959104ff28400dac3ad3118fbb0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "85ec8b0b_eef8d6ac",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2016-09-27T19:00:13Z",
      "side": 1,
      "message": "Once you\u0027ve got vendor image support, we\u0027ll want a way to specify a default public key for vendor if we\u0027re not building the vendor image. For AOSP, the vendor image is either coming in as a prebuilt, or is already on the device.",
      "parentUuid": "6b3926b8_99ed27b8",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 34,
        "endChar": 52
      },
      "revId": "7eb31c76cbd4c959104ff28400dac3ad3118fbb0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b3926b8_7e26b5d6",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 940,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2016-09-15T22:02:29Z",
      "side": 1,
      "message": "vbmetaimage?",
      "range": {
        "startLine": 940,
        "startChar": 8,
        "endLine": 940,
        "endChar": 17
      },
      "revId": "7eb31c76cbd4c959104ff28400dac3ad3118fbb0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90d3ebea_127e4c09",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 940,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2016-09-19T15:16:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6b3926b8_7e26b5d6",
      "range": {
        "startLine": 940,
        "startChar": 8,
        "endLine": 940,
        "endChar": 17
      },
      "revId": "7eb31c76cbd4c959104ff28400dac3ad3118fbb0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}