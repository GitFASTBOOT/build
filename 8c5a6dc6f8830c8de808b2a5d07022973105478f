{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fefa2fba_68af789c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-06T12:15:45Z",
      "side": 1,
      "message": "Hi Yifan, PTAL,\nturns out that most of the bits and pieces are already there, and I only need to add these few lines to add the ability to built recovery as a standalone ramdisk.\n\n",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c2834777_0a01755e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-07T19:12:46Z",
      "side": 1,
      "message": "ping",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "47c1149d_af5e1819",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 226,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-04-07T20:19:29Z",
      "side": 1,
      "message": "I don\u0027t understand this whole section, so this may be a naive question.\n\nDoesn\u0027t L236,L237 reset STAGING_DIR and FILES to empty?",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df188cb6_493c3d71",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 226,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-08T05:37:22Z",
      "side": 1,
      "message": "No, L232-241 goes through *BOARD*_VENDOR_RAMDISK_FRAGMENTS which mustn\u0027t include the recovery ramdisk if BOARD_INCLUDE_RECOVERY_RAMDISK_IN_VENDOR_BOOT is specified, else the KATI_READONLY protection at L228 would be triggered.\n\nAfter L232-241 initializes the .STAGING_DIR (which is the exact directory tree to be packaged into the cpio archive) and .FILES (which is just a list of dependencies (Make targets) to ensure the contents of .STAGING_DIR are built) of *BOARD*_VENDOR_RAMDISK_FRAGMENTS, *BOARD*_VENDOR_RAMDISK_FRAGMENTS is appended to *INTERNAL*_VENDOR_RAMDISK_FRAGMENTS.\n\nThat\u0027s the reason why VENDOR_RAMDISK_FRAGMENT.recovery.FILES is just the recovery ramdisk timestamp, because the recovery-timestamp depends on all files under TARGET_RECOVERY_ROOT_OUT\n\nSo if BOARD_INCLUDE_RECOVERY_RAMDISK_IN_VENDOR_BOOT is true, then\n\n  INTERNAL_VENDOR_RAMDISK_FRAGMENTS :\u003d recovery $(BOARD_VENDOR_RAMDISK_FRAGMENTS)\n\nelse\n\n  INTERNAL_VENDOR_RAMDISK_FRAGMENTS :\u003d $(BOARD_VENDOR_RAMDISK_FRAGMENTS)",
      "parentUuid": "47c1149d_af5e1819",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "de64bd62_6630ad9c",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 226,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-04-08T21:19:07Z",
      "side": 1,
      "message": "Ack, that makes sense.\n\nInstead of relying on L228, can you add a line before L224 that explicitly checks that recovery cannot be in BOARD_VENDOR_RAMDISK_FRAGMENTS? This also gives the user a better error message.",
      "parentUuid": "df188cb6_493c3d71",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "23eb646c_8562543d",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 226,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-04-08T21:21:18Z",
      "side": 1,
      "message": "Something like:\n\n  $(if $(filter recovery,$(BOARD_VENDOR_RAMDISK_FRAGMENTS)),\n    $(error BOARD_VENDOR_RAMDISK_FRAGMENTS must not contain recovery if BOARD_INCLUDE_RECOVERY_RAMDISK_IN_VENDOR_BOOT is set))",
      "parentUuid": "de64bd62_6630ad9c",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fb27f4f0_03380ce2",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 226,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-09T04:47:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "23eb646c_8562543d",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9628af5_4462d107",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 1033,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-04-07T20:19:29Z",
      "side": 1,
      "message": "nit: add a comment above this line? e.g.\n\nIf including the recovery ramdisk itself in vendor_boot, exclude recovery files in the default vendor ramdisk image.",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91faecce_30f34d9b",
        "filename": "core/Makefile",
        "patchSetId": 3
      },
      "lineNbr": 1033,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-08T05:37:22Z",
      "side": 1,
      "message": "Nice idea, Done.",
      "parentUuid": "b9628af5_4462d107",
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95e83941_78ce56da",
        "filename": "core/board_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 111,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-04-07T20:19:29Z",
      "side": 1,
      "message": "note: please update source.android.com/preview as well (ping me for exact link)",
      "range": {
        "startLine": 111,
        "startChar": 4,
        "endLine": 111,
        "endChar": 49
      },
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c9c548c_9e9d5232",
        "filename": "core/board_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 111,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-08T05:37:22Z",
      "side": 1,
      "message": "I plan to update SAC preview after this is sent. Or should I send the preview doc first?",
      "parentUuid": "95e83941_78ce56da",
      "range": {
        "startLine": 111,
        "startChar": 4,
        "endLine": 111,
        "endChar": 49
      },
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f31c78a9_e4caf91d",
        "filename": "core/board_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 111,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2021-04-08T21:19:07Z",
      "side": 1,
      "message": "It is okay to send later. Just keep that in mind",
      "parentUuid": "1c9c548c_9e9d5232",
      "range": {
        "startLine": 111,
        "startChar": 4,
        "endLine": 111,
        "endChar": 49
      },
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fa10a50b_73d78931",
        "filename": "core/board_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 111,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-13T04:56:48Z",
      "side": 1,
      "message": "Please re-review this one last time, and the doc update is ready for review cl/367953647",
      "parentUuid": "f31c78a9_e4caf91d",
      "range": {
        "startLine": 111,
        "startChar": 4,
        "endLine": 111,
        "endChar": 49
      },
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb9a2a08_9e746117",
        "filename": "core/board_config.mk",
        "patchSetId": 3
      },
      "lineNbr": 111,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-04-14T18:53:22Z",
      "side": 1,
      "message": "*ping*",
      "parentUuid": "fa10a50b_73d78931",
      "range": {
        "startLine": 111,
        "startChar": 4,
        "endLine": 111,
        "endChar": 49
      },
      "revId": "8c5a6dc6f8830c8de808b2a5d07022973105478f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}