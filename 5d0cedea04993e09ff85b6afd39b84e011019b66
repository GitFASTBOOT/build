{
  "comments": [
    {
      "key": {
        "uuid": "5223d624_0a28db34",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 19,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-10-02T18:57:20Z",
      "side": 1,
      "message": "Why is there a symlink?  Init doesn\u0027t read files through a symlink for security reasons, so it won\u0027t help init loading the file, and I don\u0027t believe there are any other readers.  \n\nCan we pick one location that works well for both targets?  The purpose of having a /first_stage_ramdisk directory in the recovery image is that after 1st stage init switches root to that directory, that it should be identical to the dedicated ramdisk partition devices.  \n\nCould we install the file to\nrecovery-as-ramdisk: /first_stage_ramdisk/etc/build.prop\ndedicated-ramdisk: /etc/build.prop\n?",
      "revId": "5d0cedea04993e09ff85b6afd39b84e011019b66",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb685852_066a8ffa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 19,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-10-02T19:53:11Z",
      "side": 1,
      "message": "For GKI, we can\u0027t distinguish the build based on recovery-as-ramdisk or dedicated ramdisk, because we don\u0027t know what device this GKI will install to. If init doesn\u0027t read symlinks for security reasons, there are two ways I can think of to get around this:\n\n(1) install to both locations\n(2) Only install to /first_stage_ramdisk/boot/etc/build.prop, but:\n(2a) in init, try /first_stage_ramdisk/boot/etc/build.prop; if that failed, try /boot/etc/build.prop\n(2b) store the file to tmpfs before switching root to /first_stage_ramdisk\n\nWDYT?",
      "parentUuid": "5223d624_0a28db34",
      "revId": "5d0cedea04993e09ff85b6afd39b84e011019b66",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ceb0932_197d56fe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 19,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-10-02T19:55:39Z",
      "side": 1,
      "message": "(1) install to both locations\n(2) Only install to /first_stage_ramdisk/boot/etc/build.prop, but in init, try /first_stage_ramdisk/boot/etc/build.prop; if that failed, try /boot/etc/build.prop\n(3) Only install to /boot/etc/build.prop, but store the file to tmpfs before switching root to /first_stage_ramdisk",
      "parentUuid": "bb685852_066a8ffa",
      "revId": "5d0cedea04993e09ff85b6afd39b84e011019b66",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}