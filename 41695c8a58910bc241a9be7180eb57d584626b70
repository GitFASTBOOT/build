{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d3dbed5c_5302d59d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-05-15T15:56:35Z",
      "side": 1,
      "message": "Thanks!",
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d4c96b3_2677aa80",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-05-15T15:56:35Z",
      "side": 1,
      "message": "Why a future version? Can we ignore the setting on kernel 6.1+ right now? Such change is a breaking change for dexpreopt, so it\u0027s better to come with a dessert release rather than a Mainline release to minimize partners\u0027 confusions.",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12be104e_c8c71fd4",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2024-05-15T15:59:57Z",
      "side": 1,
      "message": "Should we also add a comment to [the documentation of `PRODUCT_ENABLE_UFFD_GC`](https://cs.android.com/android/platform/superproject/main/+/main:build/make/core/product.mk;l\u003d441-451;drc\u003de4a3e9ee5ae77301c351be2c148e29a54c9edf59), which is the build-system knob that product owners can currently use to influence the value of this system property?",
      "range": {
        "startLine": 268,
        "startChar": 2,
        "endLine": 268,
        "endChar": 22
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "09c3a31c_a726448e",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2024-05-15T18:06:13Z",
      "side": 1,
      "message": "I\u0027m assuming you are talking about a boot-time check in mark_compact.cc to ignore the flag for \u003e6.1 kernels. Would that be ok from dexpreopt pov?",
      "parentUuid": "0d4c96b3_2677aa80",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "786b24b4_dab57139",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-05-15T18:38:31Z",
      "side": 1,
      "message": "It\u0027s okay as long as we warn developers that setting `PRODUCT_ENABLE_UFFD_GC :\u003d false` breaks dexpreopt.",
      "parentUuid": "09c3a31c_a726448e",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5b28072_52c69048",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2024-05-15T19:07:12Z",
      "side": 1,
      "message": "Makes sense.",
      "parentUuid": "786b24b4_dab57139",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d01f0da6_96da59fa",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-05-15T19:22:16Z",
      "side": 1,
      "message": "\u003e Why a future version?\n\nAs you say, implementing that check now means we ought to get it in sync with the build-time logic. If we wait we can instead remove the build time flag altogether and always use CMC for system images and preloads, and then implement the kernel check logic at runtime for module updates only.\n\n\u003e ignore the flag for \u003e6.1 kernels\n\n@lokeshgidra@google.com Just to be clear here, should we say \"6.1 or later\" or \"later than 6.1\"?",
      "parentUuid": "786b24b4_dab57139",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "630526a8_890c9f6a",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-05-15T19:22:16Z",
      "side": 1,
      "message": "Done. I kept the doc here too in case readers only look up the system property.",
      "parentUuid": "12be104e_c8c71fd4",
      "range": {
        "startLine": 268,
        "startChar": 2,
        "endLine": 268,
        "endChar": 22
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87622cc0_c670c391",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2024-05-15T19:33:48Z",
      "side": 1,
      "message": "Oops. my mistakes. As you said, it should be \u003e\u003d6.1",
      "parentUuid": "d01f0da6_96da59fa",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a950896d_b26b7f07",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-05-15T19:42:16Z",
      "side": 1,
      "message": "Great, thanks for confirming.",
      "parentUuid": "87622cc0_c670c391",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52c135b5_ed841b76",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-05-16T15:42:18Z",
      "side": 1,
      "message": "After discussion in the module team meeting today we decided to document a deadline instead of a kernel version. PTAL.",
      "parentUuid": "a950896d_b26b7f07",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05ce7b72_ce6777b1",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 268,
      "author": {
        "id": 1258954
      },
      "writtenOn": "2024-05-16T16:42:16Z",
      "side": 1,
      "message": "Makes sense. Thanks Martin.",
      "parentUuid": "52c135b5_ed841b76",
      "range": {
        "startLine": 268,
        "startChar": 56,
        "endLine": 268,
        "endChar": 72
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "acec744b_85477b98",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 269,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2024-05-15T15:56:35Z",
      "side": 1,
      "message": "I think it\u0027s better to document this at PRODUCT_ENABLE_UFFD_GC because that\u0027s what a partner would set. https://cs.android.com/android/platform/superproject/main/+/main:build/make/target/product/default_art_config.mk;l\u003d172;drc\u003d0f00fbd681b3550bc13763847b8df3ea0c5eef6c",
      "range": {
        "startLine": 268,
        "startChar": 0,
        "endLine": 269,
        "endChar": 56
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a6b0193a_c4b287af",
        "filename": "core/sysprop_config.mk",
        "patchSetId": 1
      },
      "lineNbr": 269,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2024-05-15T19:22:16Z",
      "side": 1,
      "message": "Roland suggested to do that in core/product.mk, where there already is docs. Isn\u0027t it enough?",
      "parentUuid": "acec744b_85477b98",
      "range": {
        "startLine": 268,
        "startChar": 0,
        "endLine": 269,
        "endChar": 56
      },
      "revId": "41695c8a58910bc241a9be7180eb57d584626b70",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}