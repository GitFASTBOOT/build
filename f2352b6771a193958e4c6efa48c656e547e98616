{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6a69d251_370b057e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-02-25T14:41:54Z",
      "side": 1,
      "message": "+mast to review and +paul and brunel-team FYI",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0240f2d4_80808889",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-02-25T14:41:54Z",
      "side": 1,
      "message": "I think the above change would break this clause as it\u0027s also using ?\u003d (it would never trigger). Note this is here primarily to counter the `else ifeq` clause following it.\n\n...but I think it also doesn\u0027t really make sense given the other changes you\u0027re making (setting prefer:true everywhere) -- we don\u0027t _always_ want to build the sdk with prebuilts (if the branch is not configured to use prebuilts).\n\nI think the logic we want here (and I\u0027ll leave it to you to make-ify it ðŸ˜œ) is\n\"if the default in this branch is to use prebuilts, we don\u0027t want to disable to use of prebuilts just because com.google.android.conscrypt isn\u0027t installed\"",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be18210b_6f37b816",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-02-25T14:49:00Z",
      "side": 1,
      "message": "\u003e and I\u0027ll leave it to you to make-ify it ðŸ˜œ\n\nmaybe something like\n```\nBRANCH_USES_PREBUILTS_BY_DEFAULT :\u003d true\n\nifeq (,$(filter sdk win_sdk sdk_addon,$(MAKECMDGOALS))$(findstring com.google.android.conscrypt,$(PRODUCT_PACKAGES)))\n  # Merge existing comment in this ifneq/ifeq block\n  MODULE_BUILD_FROM_SOURCE :\u003d true\nelse\n  # using ?\u003d here means we respect the user\u0027s explicit wish\n  MODULE_BUILD_FROM_SOURCE ?\u003d $(BRANCH_USES_PREBUILTS_BY_DEFAULT)\nendif  \n```",
      "parentUuid": "0240f2d4_80808889",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b82ea1d1_fbbd31e6",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-28T23:53:45Z",
      "side": 1,
      "message": "\u003e MODULE_BUILD_FROM_SOURCE ?\u003d $(BRANCH_USES_PREBUILTS_BY_DEFAULT)\n\nIsn\u0027t a negation missing there? Or preferably, call it BRANCH_USES_MODULE_SOURCE_BY_DEFAULT instead.",
      "parentUuid": "be18210b_6f37b816",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22bf6a9c_f6a8abac",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1305591
      },
      "writtenOn": "2022-03-03T16:53:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b82ea1d1_fbbd31e6",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dde367e2_6d5db656",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-28T23:53:45Z",
      "side": 1,
      "message": "If the intention is to flip a variable like BRANCH_USES_PREBUILTS_BY_DEFAULT in this file in dessert branches close to release, then I suggest you add clauses similar to these to retain some DWIM for unbundled builds.",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 74,
        "endChar": 46
      },
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5b6a7995_01167b6a",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1305591
      },
      "writtenOn": "2022-03-03T16:52:55Z",
      "side": 1,
      "message": "unbundled builds set MODULE_BUILD_FROM_SOURCE\u003dtrue explicitly:\n\nhttps://android.googlesource.com/platform/packages/modules/common/+/0a4fe9ad55d318c57b7aeec8c0919f96af446548/build/build_unbundled_mainline_module.sh#142\n\nany reason to set this here?",
      "parentUuid": "dde367e2_6d5db656",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 74,
        "endChar": 46
      },
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef69c3bd_f8a35b56",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-03-03T19:27:05Z",
      "side": 1,
      "message": "Yes, if people build locally, e.g. using `banchan`.\n\nThe TARGET_PRODUCT condition should be enough - looking at TARGET_BUILD_APPS as well only makes (marginal) sense for toggling individual modules.",
      "parentUuid": "5b6a7995_01167b6a",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 74,
        "endChar": 46
      },
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "88b23228_3fcb5dd4",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1305591
      },
      "writtenOn": "2022-03-03T21:34:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef69c3bd_f8a35b56",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 74,
        "endChar": 46
      },
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "294e4dd6_5a9d1c6d",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-28T23:53:45Z",
      "side": 1,
      "message": "It\u0027s probably better if an explicit MODULE_BUILD_FROM_SOURCE\u003dfalse (or BRANCH_USES_PREBUILTS_BY_DEFAULT\u003dtrue) propagates to the ART variable as well.",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89bcfe88_77294e1c",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1305591
      },
      "writtenOn": "2022-03-03T16:52:55Z",
      "side": 1,
      "message": "but where in this set of ifs? with the new logic MODULE_BUILD_FROM_SOURCE is always set, so if I add here a condition for MODULE_BUILD_FROM_SOURCE\u003dfalse too all the following conditions would be invalidated.\n\nCan you suggest a final logic (or follow up in another CL) for this block of ifs?",
      "parentUuid": "294e4dd6_5a9d1c6d",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5b5f0a1e_f9b5c869",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-03-03T19:27:05Z",
      "side": 1,
      "message": "I think we should just let the ART variable default to MODULE_BUILD_FROM_SOURCE, which makes more sense if it\u0027s combined with cleaning up the special cases below. I\u0027ll create a CL once this is in.",
      "parentUuid": "89bcfe88_77294e1c",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "88f1e8ac_54d91f87",
        "filename": "core/android_soong_config_vars.mk",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-28T23:53:45Z",
      "side": 1,
      "message": "(I should clean up the conditions below - they were a way to track the long-tail cases when the aim was to use ART prebuilts by default, but that\u0027s no longer the case.)",
      "revId": "f2352b6771a193958e4c6efa48c656e547e98616",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}