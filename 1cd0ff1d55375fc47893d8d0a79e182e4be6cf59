{
  "comments": [
    {
      "key": {
        "uuid": "50f43e04_a1491f20",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2688,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2017-04-11T16:52:28Z",
      "side": 1,
      "message": "This warn.py is imported to google3 to run in cron jobs.\nIt needs to pass gpylint.\nPlease run \"gpylint warn.py\".\nIt has now the following warning:\n\nC6113:2688: Args section is missing, does not match arg list or is badly indented.\nExpected: sev, kind\n\n\nBut, instead of returning the whole csv file content,\ncould you pass in an output file object and dump to that file?",
      "range": {
        "startLine": 2688,
        "startChar": 5,
        "endLine": 2688,
        "endChar": 10
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fa503dd_61f65499",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2688,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T17:10:06Z",
      "side": 1,
      "message": "Lint error fixed, second point addressed below.",
      "parentUuid": "50f43e04_a1491f20",
      "range": {
        "startLine": 2688,
        "startChar": 5,
        "endLine": 2688,
        "endChar": 10
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "786559a0_1fb64fe3",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2730,
      "author": {
        "id": 1000980
      },
      "writtenOn": "2017-04-11T16:38:24Z",
      "side": 1,
      "message": "https://docs.python.org/2/library/csv.html?",
      "range": {
        "startLine": 2730,
        "startChar": 2,
        "endLine": 2730,
        "endChar": 47
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72c7158e_cdbbcf5c",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2730,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T16:41:15Z",
      "side": 1,
      "message": "yes, it is indeed questionable why this code implements a custom csv printer, also there are a lot of other \"opportunities\"  that I would like to fix as follow ups to this code.",
      "parentUuid": "786559a0_1fb64fe3",
      "range": {
        "startLine": 2730,
        "startChar": 2,
        "endLine": 2730,
        "endChar": 47
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db2018eb_71a290dc",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2730,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2017-04-11T17:57:15Z",
      "side": 1,
      "message": "This script used simple print to stdout and dump html only, before I added csv dump and changed to dump dynamic html code. So I used simple print first.\nIf anyone has plan to improve the code further, yes, i think we should use standard library and more google coding style.",
      "parentUuid": "72c7158e_cdbbcf5c",
      "range": {
        "startLine": 2730,
        "startChar": 2,
        "endLine": 2730,
        "endChar": 47
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ccaea0b1_88dc335c",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2730,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T18:11:54Z",
      "side": 1,
      "message": "I agree, seems like a good improvement to do after this.",
      "parentUuid": "db2018eb_71a290dc",
      "range": {
        "startLine": 2730,
        "startChar": 2,
        "endLine": 2730,
        "endChar": 47
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9759d13_7ecb1d78",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2739,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2017-04-11T16:52:28Z",
      "side": 1,
      "message": "Could you pass the output file object or stdout to dump_csv?",
      "range": {
        "startLine": 2739,
        "startChar": 14,
        "endLine": 2739,
        "endChar": 22
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d628584b_3e06490d",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2739,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T17:10:06Z",
      "side": 1,
      "message": "My goal here was the make dump_csv return a string, and take no args, it is a generic function that is not concerned with how the output is going to be used, instead it is just a simple function that when called returns a string that can then be used in another way,\n\ncoupling the output concerns with the \"dump\" logic muddies the function and more tightly couples it with concerns that are note directly related to the intent of the function.\n\nAnother advantage of this approach is that now the function is more easily testable where before or with passing in a custom output interface you would need to test the interface.",
      "parentUuid": "b9759d13_7ecb1d78",
      "range": {
        "startLine": 2739,
        "startChar": 14,
        "endLine": 2739,
        "endChar": 22
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c334cfae_3b68ec24",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2739,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2017-04-11T17:57:15Z",
      "side": 1,
      "message": "In the past we have wanted to clean up this script and make it possibile to dump to a file too, for both csv and html file.\nWhile csv output is small now, it could grow.\nCurrent html output is already very big and impractical to return a whole string.\nFor future adoption of csv write library,\nI think you will need to pass a file object down.\nFor testing, wouldn\u0027t StringIO object work as a file object?",
      "parentUuid": "d628584b_3e06490d",
      "range": {
        "startLine": 2739,
        "startChar": 14,
        "endLine": 2739,
        "endChar": 22
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ec44831_d4b99c52",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2739,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T18:11:54Z",
      "side": 1,
      "message": "We should be passing data in and data out and implement printers based on the data.\nRight now I made this change to align the code with this idea of data in and data out (string).\n\nIdeally dump_csv would return a dict structure that we would pass into a csv formatter that would optionally save to a file.\nThese all seem like good improvements to make after this change.\n\nas far as the size argument for returning strings I think we are pretty far from hitting memory limits, and if we do, we can implement streaming solutions to avoid this.",
      "parentUuid": "c334cfae_3b68ec24",
      "range": {
        "startLine": 2739,
        "startChar": 14,
        "endLine": 2739,
        "endChar": 22
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ccaff93_3b8ecdbf",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2741,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2017-04-11T16:52:28Z",
      "side": 1,
      "message": "Do you need to print csv data to both stdout and a file?\nHow about just\n  if args.csvpath:\n     # dump csv to a file\n  if args.gencsv and not args.csvpath:\n     # dump csv to stdout\n  else:\n     # dump html to stdout\n\nNote that our current cron jobs collect this scripts output in stdout.",
      "range": {
        "startLine": 2741,
        "startChar": 4,
        "endLine": 2741,
        "endChar": 9
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97fd468b_5903b792",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2741,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T17:10:06Z",
      "side": 1,
      "message": "I left the existing code path is for your consumer,\nI am not going to exercise this branch of the logic.\n\nSo for me, I want to \n\n1. write the html to stdout (as the current behavior is)\n2. also write the csv report to a file, not using stdout (new behavior)",
      "parentUuid": "8ccaff93_3b8ecdbf",
      "range": {
        "startLine": 2741,
        "startChar": 4,
        "endLine": 2741,
        "endChar": 9
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80f85345_8dd8dfcd",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2741,
      "author": {
        "id": 1052399
      },
      "writtenOn": "2017-04-11T17:57:15Z",
      "side": 1,
      "message": "Okay, if gencsv and csvpath are not going to be used together, we should add a check and reject that combination. Or, if we want to allow that combination, the users would most likely expect output only to the file, not also to the stdout.\n\nAs we are thinking about providing also option to dump html to a named file, in the future, we would try to make all flag combinations easier to remember.",
      "parentUuid": "97fd468b_5903b792",
      "range": {
        "startLine": 2741,
        "startChar": 4,
        "endLine": 2741,
        "endChar": 9
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d7597af_b3396975",
        "filename": "tools/warn.py",
        "patchSetId": 1
      },
      "lineNbr": 2741,
      "author": {
        "id": 1099348
      },
      "writtenOn": "2017-04-11T18:11:54Z",
      "side": 1,
      "message": "Sure, change made to make them exclusive",
      "parentUuid": "80f85345_8dd8dfcd",
      "range": {
        "startLine": 2741,
        "startChar": 4,
        "endLine": 2741,
        "endChar": 9
      },
      "revId": "1cd0ff1d55375fc47893d8d0a79e182e4be6cf59",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}