{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e8f3842e_2512d17c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-20T23:12:49Z",
      "side": 1,
      "message": "Did you run this in forrest to check to see if it passes on ToT? Ping me if you aren\u0027t sure how. It\u0027s not setup in presubmit now unfortunately, but I\u0027m also okay if you want to merge this and wait a day to see, especially if you have already tested it locally. Though, I\u0027ve run into a few problems because the build server environment is different.",
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5bb62639_769ab158",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-20T23:12:49Z",
      "side": 1,
      "message": "nit: explanation of what this script does (explanation of other script is buried above \"This script is WIP ..\").\n\nWhat I\u0027m confused is why the above script is not called from this.",
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0564041f_f6d2628f",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1166043
      },
      "writtenOn": "2022-09-20T23:56:45Z",
      "side": 1,
      "message": "Ah? The above script is called from this, see function finalize()?",
      "parentUuid": "5bb62639_769ab158",
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dddd85e6_a4ac6c4d",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-21T00:22:33Z",
      "side": 1,
      "message": "ah! - I see now",
      "parentUuid": "0564041f_f6d2628f",
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5bb3529e_f7b37ee2",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 3,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-20T23:12:49Z",
      "side": 1,
      "message": "nit: we\u0027re dropping this?",
      "range": {
        "startLine": 3,
        "startChar": 0,
        "endLine": 3,
        "endChar": 9
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc793f41_274ccadc",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 3,
      "author": {
        "id": 1166043
      },
      "writtenOn": "2022-09-20T23:56:45Z",
      "side": 1,
      "message": "this will terminate script if any tool returns a non-zero status. repo+friends are returning banch of non-zeros for all kinds of reasons, terminating the script prematurely",
      "parentUuid": "5bb3529e_f7b37ee2",
      "range": {
        "startLine": 3,
        "startChar": 0,
        "endLine": 3,
        "endChar": 9
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d42f72d6_8377a4a5",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 3,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-21T00:22:33Z",
      "side": 1,
      "message": "You can push/pop or run them in a subshell to selectively disable this.",
      "parentUuid": "bc793f41_274ccadc",
      "range": {
        "startLine": 3,
        "startChar": 0,
        "endLine": 3,
        "endChar": 9
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a940ed7b_52cf09bf",
        "filename": "finalize-step-1.sh",
        "patchSetId": 1
      },
      "lineNbr": 5,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-20T23:12:49Z",
      "side": 1,
      "message": "self-documenting code :)",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 5,
        "endChar": 33
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2e88e8c_73fef4b5",
        "filename": "finalize_branch_for_release.sh",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-20T23:12:49Z",
      "side": 1,
      "message": "(main comment, though if you don\u0027t want to do this, I don\u0027t care): we should do this after L50 (or again). The idea of this command is that we test that the build is setup. For instance, we want to test a device can be built after update-api runs.",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 35,
        "endChar": 37
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a726b34f_420a0ef5",
        "filename": "finalize_branch_for_release.sh",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1166043
      },
      "writtenOn": "2022-09-20T23:56:45Z",
      "side": 1,
      "message": "Ideally I would not want to do anything here. In fact I was going to conditionally remove this build. The build has to happen in the branch and failure(s) needs to be visible.\nBut still if there is a critical error, we probably don\u0027t want to submit half-ready-half-broken CLs.\nIdeas?",
      "parentUuid": "e2e88e8c_73fef4b5",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 35,
        "endChar": 37
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d637deaa_a46d0ce9",
        "filename": "finalize_branch_for_release.sh",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-09-21T00:21:27Z",
      "side": 1,
      "message": "We can have a few scripts:\n1. finalize branch (maybe this could be broken up further into \u0027finalize AIDL\u0027 \u0027finalize VNDK\u0027 \u0027finalize sepolicy\u0027 \u0027finalize SDK\u0027 etc..\n2. test branch\n\nCurrent nightly build calls finalize + test w/ argument nightly.\n\nYour new branch-based system calls the test script with various arguments.\n\nAnd - the reason why I suggest scripts is because this allows us to change what the build servers run without editing the build server configuration. If it always calls the scripts, we can put whatever targets we want here. It minimizes the configuration in build infra. AND it means locally, you already have a way to run the command that would run on the build server. Granted, this isn\u0027t how builds are typically configured, but I like it different :)",
      "parentUuid": "a726b34f_420a0ef5",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 35,
        "endChar": 37
      },
      "revId": "91ebd4ce3d1f519523c053996957a0ea29537678",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}