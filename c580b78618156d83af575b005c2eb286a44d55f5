{
  "comments": [
    {
      "key": {
        "uuid": "530525af_b03edc30",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2017-12-06T20:39:43Z",
      "side": 1,
      "message": "extra \"ls \" (though it looks like this was copied from some other .mk files)",
      "range": {
        "startLine": 9,
        "startChar": 39,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1eb015e6_f20c8159",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-12-06T22:36:22Z",
      "side": 1,
      "message": "Good catch, device-tests and general-tests are the source of copy paste, I will fix them in a different cl that I\u0027m updating these two mk files.",
      "parentUuid": "530525af_b03edc30",
      "range": {
        "startLine": 9,
        "startChar": 39,
        "endLine": 9,
        "endChar": 48
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b60a00b2_ec483f7d",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2017-12-06T20:39:43Z",
      "side": 1,
      "message": "Just to double-check: will test writers expect the build system to autodetect file paths of $(dir)/**/res/config/**/*.xml (as opposed to, for example, only checking $(dir)/res/config/**/*.xml)?",
      "range": {
        "startLine": 19,
        "startChar": 69,
        "endLine": 19,
        "endChar": 94
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40abaedc_8a5f9aa6",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2017-12-06T20:39:43Z",
      "side": 1,
      "message": "Is this variable expected to be empty before this +\u003d? If so, then (due to the fact that +\u003d of a previously undefined variable means lazy evaluation in Make) it\u0027d be good to initialize it to empty right above the loop",
      "range": {
        "startLine": 19,
        "startChar": 9,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9086644e_2de0604c",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-12-06T22:36:22Z",
      "side": 1,
      "message": "autodetect. Are you worried that the make won\u0027t be re-run if new test config files are added/removed?\n\nI think that\u0027s OK. The artifact (tradefed_tests_list_zip) will only be used by a service query build artifacts through build API. There is no local dev use case for it.",
      "parentUuid": "b60a00b2_ec483f7d",
      "range": {
        "startLine": 19,
        "startChar": 69,
        "endLine": 19,
        "endChar": 94
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b95545b_14bc38e6",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-12-06T22:36:22Z",
      "side": 1,
      "message": "will do, init it with empty.",
      "parentUuid": "40abaedc_8a5f9aa6",
      "range": {
        "startLine": 19,
        "startChar": 9,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f0693bf_817d32d5",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2017-12-06T22:56:14Z",
      "side": 1,
      "message": "What I wonder is whether people would misunderstand this: perhaps they would observe that there is some autodetection going on given that $(dir)/res/config/file.xml and $(dir)/subdir/res/config/sub2/file.xml both work, and not realize that this expression is actually `find -type f -name \"*.xml\"` (and don\u0027t realize that there is a \"-path\" argument too) and would then create a new directory, maybe /res/moretests/config and be surprised that it doesn\u0027t get included.\n\nYou\u0027re probably more familiar with who/what is going to be generating these files (the ones that are discovered by the find), so if this is what\u0027s most convenient for them then that\u0027s fine.\n\nI just want to double-check that this is actually the approach that\u0027s most convenient to use (as opposed to, for example, only checking $(dir)/res/config/**/*.xml)",
      "parentUuid": "9086644e_2de0604c",
      "range": {
        "startLine": 19,
        "startChar": 69,
        "endLine": 19,
        "endChar": 94
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e23d589f_909d0fdc",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-12-06T23:02:16Z",
      "side": 1,
      "message": "I see, \"res/config\" is a fixed path (also part of java project) in TradeFed. If one puts test configs in a different path not under res/config, TradeFed won\u0027t even run it. So we won\u0027t run into that kind of misunderstanding.",
      "parentUuid": "3f0693bf_817d32d5",
      "range": {
        "startLine": 19,
        "startChar": 69,
        "endLine": 19,
        "endChar": 94
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cba5f264_909fbc39",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2017-12-06T23:11:24Z",
      "side": 1,
      "message": "Ok cool. In that case, would it also work to replace:\n\n  $(shell find $(dir) -type f -name \"*.xml\" -path \u0027*\\/res\\/config\\/*\u0027)\n\nwith\n\n  $(shell find $(dir)/res/config -type f -name \"*.xml\")\n\n?",
      "parentUuid": "e23d589f_909d0fdc",
      "range": {
        "startLine": 19,
        "startChar": 69,
        "endLine": 19,
        "endChar": 94
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e50ae212_c789779a",
        "filename": "core/tasks/tradefed-tests-list.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2017-12-06T23:19:48Z",
      "side": 1,
      "message": "sorry, I didn\u0027t make it clear. res/config may not be the top folder under $(dir). A TF repo may have multiple java projects, each has its own res/config, e.g.,\ntools/tradefederation/core/res/config\ntools/tradefederation/core/prod-tests/res/config\ntools/tradefederation/core/tests/res/config\n\nThat\u0027s why I need a path filter there.",
      "parentUuid": "cba5f264_909fbc39",
      "range": {
        "startLine": 19,
        "startChar": 69,
        "endLine": 19,
        "endChar": 94
      },
      "revId": "c580b78618156d83af575b005c2eb286a44d55f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}