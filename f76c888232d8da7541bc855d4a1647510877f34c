{
  "comments": [
    {
      "key": {
        "uuid": "4b8b674c_60aa93dd",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-03-14T23:32:38Z",
      "side": 1,
      "message": "This should be $(PRODUCT_OUT)/device-tests.zip (since it will change based on the selected product), and $(OUT_DIR)/$@ should be $@ in the rule.",
      "revId": "f76c888232d8da7541bc855d4a1647510877f34c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a420b6a8_f5e71c5f",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2017-03-14T23:32:38Z",
      "side": 1,
      "message": "This will guarantee that device-tests.zip is built after all the files listed in $(COMPATIBILITY.device-tests.FILES), but if other files are copied into $(HOST_OUT_TESTCASES) by other rules a random subset of them will get zipped up.  If you already have a list of files, can you use echo $(COMPATIBILITY.device-tests.FILES) \u003e $@.list?  It will require $(COMPATIBILITY.device-tests.FILES) to be comprehensive, including all test data files, dependencies, etc.",
      "revId": "f76c888232d8da7541bc855d4a1647510877f34c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7aad68ac_0c847492",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1083173
      },
      "writtenOn": "2017-03-14T23:46:55Z",
      "side": 1,
      "message": "I tried that but no luck. $(COMPATIBILITY.device-tests.FILES) is exactly what I want, the only dependency is the tradefed zip which is already built by the builders.\n\n\n\nFAILED: device-tests.zip\n/bin/bash -c \"(echo out/target/product/generic_arm64/testcases/libminijail_test/libminijail_test  out/target/product/generic_arm64/testcases/libminijail_test/libminijail_test.config out/target/product/generic_arm64/testcases/libminijail_test/libminijail_test out/target/product/generic_arm64/testcases/HelloWorldTests/HelloWorldTests.apk  out/target/product/generic_arm64/testcases/HelloWorldTests/HelloWorldTests.config out/target/product/generic_arm64/testcases/hello_world_test/hello_world_test  out/target/product/generic_arm64/testcases/hello_world_test/hello_world_test.config out/target/product/generic_arm64/testcases/hello_world_test/hello_world_test out/target/product/generic_arm64/testcases/AppLinkFunctionalTests/AppLinkFunctionalTests.apk out/target/product/generic_arm64/testcases/AppSmoke/AppSmoke.apk out/target/product/generic_arm64/testcases/DeviceHealthTests/DeviceHealthTests.apk out/target/product/generic_arm64/testcases/DownloadAppFunctionalTests/DownloadAppFunctionalTests.apk out/target/product/generic_arm64/testcases/NotificationFunctionalTests/NotificationFunctionalTests.apk out/target/product/generic_arm64/testcases/OverviewFunctionalTests/OverviewFunctionalTests.apk out/target/product/generic_arm64/testcases/PermissionFunctionalTests/PermissionFunctionalTests.apk out/target/product/generic_arm64/testcases/SystemMetricsFunctionalTests/SystemMetricsFunctionalTests.apk out/target/product/generic_arm64/testcases/AppLinkTestApp/AppLinkTestApp.apk out/target/product/generic_arm64/testcases/PermissionTestAppMV1/PermissionTestAppMV1.apk out/target/product/generic_arm64/testcases/UbSystemUiJankTests/UbSystemUiJankTests.apk out/target/product/generic_arm64/testcases/AndroidTVJankTests/AndroidTVJankTests.apk out/target/product/generic_arm64/testcases/DialerJankTests/DialerJankTests.apk out/target/product/generic_arm64/testcases/JankMicroBenchmarkTests/JankMicroBenchmarkTests.apk out/target/product/generic_arm64/testcases/NotificationsGeneratorWear/NotificationsGeneratorWear.apk out/target/product/generic_arm64/testcases/SysAppJankTestsWear/SysAppJankTestsWear.apk out/target/product/generic_arm64/testcases/TouchLatencyJankTestWear/TouchLatencyJankTestWear.apk out/target/product/generic_arm64/testcases/UiBenchJankTests/UiBenchJankTests.apk out/target/product/generic_arm64/testcases/UiBenchJankTestsWear/UiBenchJankTestsWear.apk out/target/product/generic_arm64/testcases/UbWebViewJankTests/UbWebViewJankTests.apk out/target/product/generic_arm64/testcases/BootHelperApp/BootHelperApp.apk out/target/product/generic_arm64/testcases/AppTransitionTests/AppTransitionTests.apk out/target/product/generic_arm64/testcases/PerformanceAppTest/PerformanceAppTest.apk out/target/product/generic_arm64/testcases/PerformanceLaunch/PerformanceLaunch.apk out/target/product/generic_arm64/testcases/PowerPerfTest/PowerPerfTest.apk \u003e device-tests.zip.list ) \u0026\u0026 (out/soong/host/linux-x86/bin/soong_zip -d -o device-tests.zip -C ./ -l device-tests.zip.list )\"\n\n\n\n\n\u003cAdding space so this legible\u003e\n\n\n\n\nlstat out/target/product/generic_arm64/testcases/libminijail_test/libminijail_test out/target/product/generic_arm64/testcases/libminijail_test/libminijail_test.config out/target/product/generic_arm64/testcases/libminijail_test/libminijail_test out/target/product/generic_arm64/testcases/HelloWorldTests/HelloWorldTests.apk out/target/product/generic_arm64/testcases/HelloWorldTests/HelloWorldTests.config out/target/product/generic_arm64/testcases/hello_world_test/hello_world_test out/target/product/generic_arm64/testcases/hello_world_test/hello_world_test.config out/target/product/generic_arm64/testcases/hello_world_test/hello_world_test out/target/product/generic_arm64/testcases/AppLinkFunctionalTests/AppLinkFunctionalTests.apk out/target/product/generic_arm64/testcases/AppSmoke/AppSmoke.apk out/target/product/generic_arm64/testcases/DeviceHealthTests/DeviceHealthTests.apk out/target/product/generic_arm64/testcases/DownloadAppFunctionalTests/DownloadAppFunctionalTests.apk out/target/product/generic_arm64/testcases/NotificationFunctionalTests/NotificationFunctionalTests.apk out/target/product/generic_arm64/testcases/OverviewFunctionalTests/OverviewFunctionalTests.apk out/target/product/generic_arm64/testcases/PermissionFunctionalTests/PermissionFunctionalTests.apk out/target/product/generic_arm64/testcases/SystemMetricsFunctionalTests/SystemMetricsFunctionalTests.apk out/target/product/generic_arm64/testcases/AppLinkTestApp/AppLinkTestApp.apk out/target/product/generic_arm64/testcases/PermissionTestAppMV1/PermissionTestAppMV1.apk out/target/product/generic_arm64/testcases/UbSystemUiJankTests/UbSystemUiJankTests.apk out/target/product/generic_arm64/testcases/AndroidTVJankTests/AndroidTVJankTests.apk out/target/product/generic_arm64/testcases/DialerJankTests/DialerJankTests.apk out/target/product/generic_arm64/testcases/JankMicroBenchmarkTests/JankMicroBenchmarkTests.apk out/target/product/generic_arm64/testcases/NotificationsGeneratorWear/NotificationsGeneratorWear.apk out/target/product/generic_arm64/testcases/SysAppJankTestsWear/SysAppJankTestsWear.apk out/target/product/generic_arm64/testcases/TouchLatencyJankTestWear/TouchLatencyJankTestWear.apk out/target/product/generic_arm64/testcases/UiBenchJankTests/UiBenchJankTests.apk out/target/product/generic_arm64/testcases/UiBenchJankTestsWear/UiBenchJankTestsWear.apk out/target/product/generic_arm64/testcases/UbWebViewJankTests/UbWebViewJankTests.apk out/target/product/generic_arm64/testcases/BootHelperApp/BootHelperApp.apk out/target/product/generic_arm64/testcases/AppTransitionTests/AppTransitionTests.apk out/target/product/generic_arm64/testcases/PerformanceAppTest/PerformanceAppTest.apk out/target/product/generic_arm64/testcases/PerformanceLaunch/PerformanceLaunch.apk out/target/product/generic_arm64/testcases/PowerPerfTest/PowerPerfTest.apk: no such file or directory",
      "parentUuid": "a420b6a8_f5e71c5f",
      "revId": "f76c888232d8da7541bc855d4a1647510877f34c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "adb52795_38d555a6",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2017-03-14T23:28:32Z",
      "side": 1,
      "message": "So if you run with both \"general-tests device-tests\" in your command line, the zip files will be identical. Should we only zip up what\u0027s in $(COMPATIBILITY.device-tests.FILES)?",
      "revId": "f76c888232d8da7541bc855d4a1647510877f34c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "352cb04d_16e4a086",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1083173
      },
      "writtenOn": "2017-03-14T23:31:54Z",
      "side": 1,
      "message": "I was just about to request how I can do this? I tried passing  $(COMPATIBILITY.device-tests.FILES) to -l and via -f and hit deadends. -f only took the first file.",
      "parentUuid": "adb52795_38d555a6",
      "revId": "f76c888232d8da7541bc855d4a1647510877f34c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}