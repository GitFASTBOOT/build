{
  "comments": [
    {
      "key": {
        "uuid": "b8477a11_be5036cf",
        "filename": "tools/releasetools/ota_from_target_files.py",
        "patchSetId": 2
      },
      "lineNbr": 1985,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2018-10-09T12:55:22Z",
      "side": 0,
      "message": "Not quite sure is this appropriate.\n\nBut from Treble\u0027s POV, it\u0027s possible to \u0027repo sync\u0027 and build only system.img or vendor.img.\nNot sure is it possible to generate partial OTA package when \u0027TARGET_NO_RECOVERY\u0027 is True.",
      "range": {
        "startLine": 1985,
        "startChar": 28,
        "endLine": 1985,
        "endChar": 39
      },
      "revId": "3f7223984c7cc6498a6ac73a597271283ae71ea8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e03d447d_aa204021",
        "filename": "tools/releasetools/ota_from_target_files.py",
        "patchSetId": 2
      },
      "lineNbr": 1985,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-11T22:04:41Z",
      "side": 0,
      "message": "Maybe eventually we\u0027ll get an OTA package for GSI target (even for non-A/B), but right now I don\u0027t think we\u0027re ready or anywhere close yet. So for the current GSI target, building only otatools.zip but not ota.zip looks more practical.",
      "parentUuid": "b8477a11_be5036cf",
      "range": {
        "startLine": 1985,
        "startChar": 28,
        "endLine": 1985,
        "endChar": 39
      },
      "revId": "3f7223984c7cc6498a6ac73a597271283ae71ea8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bef148a1_8dbea538",
        "filename": "tools/releasetools/ota_from_target_files.py",
        "patchSetId": 2
      },
      "lineNbr": 1985,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2018-10-12T04:36:25Z",
      "side": 0,
      "message": "Yup, let\u0027s allow signing GSI first.",
      "parentUuid": "e03d447d_aa204021",
      "range": {
        "startLine": 1985,
        "startChar": 28,
        "endLine": 1985,
        "endChar": 39
      },
      "revId": "3f7223984c7cc6498a6ac73a597271283ae71ea8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f193734f_ed3017ce",
        "filename": "tools/releasetools/ota_from_target_files.py",
        "patchSetId": 2
      },
      "lineNbr": 1985,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2018-10-12T17:02:00Z",
      "side": 0,
      "message": "Just to be clear, GSI target actually has no concept of A/B or non-A/B.\n\nIn Oreo, *_ab or *_a (non-A/B) actually refers to \"system-as-root\" and \"non-system-as-root\", respectively. https://source.android.com/setup/build/gsi#legacy-gsi-build-targets\n\nIn P, as \"system-as-root\u0027 becomes mandatory, we removed *_ab and *_a targets for new launched devices in P. https://source.android.com/setup/build/gsi#p-gsi-build-targets\n\nGiven that, is it possible to build a \"system-only\" OTA package from a GSI target that can be used in both A/B and non-A/B devices? (assuming they\u0027re all system-as-root or non-system-as-root).",
      "parentUuid": "bef148a1_8dbea538",
      "range": {
        "startLine": 1985,
        "startChar": 28,
        "endLine": 1985,
        "endChar": 39
      },
      "revId": "3f7223984c7cc6498a6ac73a597271283ae71ea8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bbd0588d_fbd16c14",
        "filename": "tools/releasetools/ota_from_target_files.py",
        "patchSetId": 2
      },
      "lineNbr": 1985,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-12T17:23:00Z",
      "side": 0,
      "message": "A/B and non-A/B packages have fundamentally different formats (because they\u0027re consumed by different updaters: one built from bootable/recovery whereas the other from system/update_engine).\n\nThere\u0027re Q (and beyond) works to do for the actual package building and installing. For example, b/111080116 tries to address some of them: adding system-only OTA pubkey to /system, getting (native, e.g. from fs_mgr) API support to query the updatable partitions for A/B, finding ways to query the path to /system partitions for non-A/B etc.",
      "parentUuid": "f193734f_ed3017ce",
      "range": {
        "startLine": 1985,
        "startChar": 28,
        "endLine": 1985,
        "endChar": 39
      },
      "revId": "3f7223984c7cc6498a6ac73a597271283ae71ea8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b749fa48_ff2287be",
        "filename": "tools/releasetools/ota_from_target_files.py",
        "patchSetId": 2
      },
      "lineNbr": 1985,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2018-10-13T03:58:29Z",
      "side": 0,
      "message": "\u003e they\u0027re consumed by different updaters: one built from bootable/recovery whereas the other from system/update_engine\n\nAh, this is interesting.\nThanks for the info.",
      "parentUuid": "bbd0588d_fbd16c14",
      "range": {
        "startLine": 1985,
        "startChar": 28,
        "endLine": 1985,
        "endChar": 39
      },
      "revId": "3f7223984c7cc6498a6ac73a597271283ae71ea8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}