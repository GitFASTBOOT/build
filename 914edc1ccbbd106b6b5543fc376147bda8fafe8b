{
  "comments": [
    {
      "key": {
        "uuid": "7916096d_8de571c4",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-03-20T10:21:31Z",
      "side": 1,
      "message": "FYI, we have a bunch of validation of which files are produced during the build in main.mk already (search for product_target_FILES). It might make sense to tie this into that instead (would just need a single $(filter), probably)",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "916d89d1_235894a4",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2019-03-20T14:59:57Z",
      "side": 1,
      "message": "That\u0027s not necessarily a fully accurate list(it doesn\u0027t take into account arbitrary dependencies), but it may be good enough. It would also provide errors before you fully built.",
      "parentUuid": "7916096d_8de571c4",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93c169e1_5494a298",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-03-20T15:23:55Z",
      "side": 1,
      "message": "Ok, had a look there, but neither control flow nor variable context is clear to me:\n\na) Where would I hook this in to ensure it isn\u0027t skipped? E.g. there\u0027s a big \"FULL_BUILD\" conditional in there - I\u0027m not sure what exactly that entails and if it\u0027s safe to assume it\u0027s set in all relevant cases.\n\nb) If the list in product_target_FILES doesn\u0027t track all dependencies then how do we know it\u0027s good enough? I\u0027d like to alert on these libraries ending up there by any possible means.\n\nArguably this crude \"find\" is less abstract and easier to understand, but it\u0027s entirely possible it has drawbacks that aren\u0027t clear to me. Also note that this should be a temporary measure for the real Soong fix tracked in b/128708192.",
      "parentUuid": "7916096d_8de571c4",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7c65dfc_d8fc4d22",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-03-20T15:25:45Z",
      "side": 1,
      "message": "by arbitrary dependencies do you mean adding a dependency via something like \"x: \u003clib\u003e\" in an Android.mk? I would have thought that to be strongly discouraged (and if it happens in our tree, it should be fixed).\n\nAre there other known things that list doesn\u0027t include?",
      "parentUuid": "916d89d1_235894a4",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "175e3d72_498efac9",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-03-20T15:46:49Z",
      "side": 1,
      "message": "oops, accidentally posted after Martin.\n\na) \"normal\" builds are always FULL_BUILD -- only special targets that skip reading Android.mk aren\u0027t (like mm, or m snod etc)\nb) I just checked and there appears to be a bunch of /system files not in product_target_FILES, but I would like for that list to shrink",
      "parentUuid": "e7c65dfc_d8fc4d22",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9aa92ad8_8f1ac9c0",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-03-20T17:18:47Z",
      "side": 1,
      "message": "b) Ok, that\u0027s unfortunate. Wouldn\u0027t it be better to stick with this hack then, to avoid getting blocked on that? I hope to be able to do something in Soong that is actually decent soon anyway.",
      "parentUuid": "175e3d72_498efac9",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11851eb3_f057ab70",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2165,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-03-20T17:31:19Z",
      "side": 1,
      "message": "if it\u0027s truly temporary, I don\u0027t mind this CL as-is, as long as it doesn\u0027t meaningfully slow the build down (which I doubt it does). I don\u0027t believe b) to be a problem for you in practice though.\n\nNote that one potential problem with the current solution is the \"m \u003clib\u003e\" followed by \"m\" would likely fail without running \"m installclean\"  in-between, as I think the \"m \u003clib\u003e\" command still installs the file in /system? The product_target_FILES solution wouldn\u0027t have that problem. Anyway, no major concerns.",
      "parentUuid": "9aa92ad8_8f1ac9c0",
      "range": {
        "startLine": 2164,
        "startChar": 10,
        "endLine": 2165,
        "endChar": 27
      },
      "revId": "914edc1ccbbd106b6b5543fc376147bda8fafe8b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}