{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0baa9871_35ae8923",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-12-13T19:46:16Z",
      "side": 1,
      "message": "it doesn\u0027t do that though, right? it just means someone\u0027s set this property...",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe712650_01808d01",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2023-12-13T20:00:52Z",
      "side": 1,
      "message": "Right, which is what prompted Colin to suggest adding a symbol to init when `PRODUCT_NO_BIONIC_PAGE_SIZE_MACRO` is actually defined. Do you have an objection to that?",
      "parentUuid": "0baa9871_35ae8923",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5065445_f8706e4e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2023-12-13T20:18:40Z",
      "side": 1,
      "message": "that\u0027s certainly \"less bad\". i\u0027m just not sure this makes much sense as a test at all, since you can\u0027t actually test the thing you want to test.\n\nnor, in particular, can you prevent the obvious fix of `#define PAGE_SIZE 4096` in their code, which seems like the biggest/most likely actual problem.",
      "parentUuid": "fe712650_01808d01",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4aca43e_a4c86845",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2023-12-13T20:28:58Z",
      "side": 1,
      "message": "Now that I think about this, we can\u0027t test `/system/bin/init` because VTS is run with a GSI image which won\u0027t reflect how the vendor builds Android for their device. That means the vts test `InitMaxPageSizeTest` is actually not doing what we want @kaleshsingh@google.com.\n\n@enh@google.com, while it\u0027s true partners could cheat on this test by just setting the build property and not actually defining `PRODUCT_NO_BIONIC_PAGE_SIZE_MACRO`, the idea of this test is to incentivize partners to switch to a page agnostic build for V to setup for shipping a 16k page device later. Thoughts @smoreland@google.com?",
      "parentUuid": "c5065445_f8706e4e",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1dccff1_2afcf7a7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-12-13T22:34:41Z",
      "side": 1,
      "message": "Hey. I actually like Colin\u0027s suggestion. It\u0027s not about preventing people from faking it, but it\u0027s that a system property is really easy to fake. If someone sees a test failing because the property set is false, they might just add that property to system/build.prop without realizing what they really need to do.\n\nHowever, they probably wouldn\u0027t fork bionic or init to add the extra symbol on accident.\n\nWe don\u0027t need to make sure nobody does this, but we want to give an early and clear signal to partners of what they should do.",
      "parentUuid": "d4aca43e_a4c86845",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43d1802d_a694876d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-04-18T00:10:02Z",
      "side": 1,
      "message": "are we okay with merging this?",
      "parentUuid": "a1dccff1_2afcf7a7",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bfaa5c02_605ba246",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2024-04-19T18:04:25Z",
      "side": 1,
      "message": "I think adding a property is the best option we have since VTS is run with a GSI image and would guarantee the test always passes regardless of what the vendor does.",
      "parentUuid": "43d1802d_a694876d",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ce602c1_72ed1507",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2023-12-13T18:08:02Z",
      "side": 1,
      "message": "No strong objection, but it seems a little roundabout to add a property just to propagate a build flag that otherwise doesn\u0027t affect anything at runtime.  It would be fairly easy for the property to become disconnected from the compiler flag accidentally.\n\nYou\u0027re already parsing the init ELF data, it might be a little hacky and I\u0027m not sure Elliott would agree, but you could use `#ifdef __BIONIC_NO_PAGE_SIZE_MACRO` to add a symbol to the init or libc binary, and then your VTS test would be checking that the flag was getting to the compiler.",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19dd3e68_96a484a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1557540
      },
      "writtenOn": "2023-12-13T18:47:54Z",
      "side": 1,
      "message": "@enh@google.com, thoughts on the approach Colin is suggesting? I\u0027m fine with that as well.",
      "parentUuid": "1ce602c1_72ed1507",
      "revId": "850a2e8e2fc2fb6870d3e00121ba5e35a6ac740f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}