{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6fd9be9d_b0e3f054",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 580,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2021-11-16T18:41:11Z",
      "side": 1,
      "message": "Thanks for writing the cl..  \nThe current variable naming is indeed confusing, as the care_map generation code actually cares about the total blocks of that partition on device. https://cs.android.com/android/platform/superproject/+/master:build/make/tools/releasetools/common.py?l\u003d3860\n\nSo we want to save the partition size on device here. And this output size is inaccurate for non-raw images (e.g. sparse image). For raw images, will there be a difference between the blocks occupation of this file on host VS the image size flashed on device? (I am not familiar with the difference between du -k vs ls, maybe it\u0027s the same if the size is aligned)",
      "range": {
        "startLine": 580,
        "startChar": 30,
        "endLine": 580,
        "endChar": 42
      },
      "revId": "8eaf39badde666cf1046471c66c6913cebe35a87",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82693c4c_fe86d73e",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 580,
      "author": {
        "id": 1290458
      },
      "writtenOn": "2021-11-23T03:28:50Z",
      "side": 1,
      "message": "Yeah, there would be a difference (necessarily, if the change to eliminate sparsing is what caused this in the first place).\n\nI can make a change to set this only for non-sparse images, but, I\u0027m a little confused by the other part of the comment. Is \"image_size\" the right key and is GetDiskUsage in the correct units? (It looked like VerityImageBuilder does use \"image_size\").",
      "parentUuid": "6fd9be9d_b0e3f054",
      "range": {
        "startLine": 580,
        "startChar": 30,
        "endLine": 580,
        "endChar": 42
      },
      "revId": "8eaf39badde666cf1046471c66c6913cebe35a87",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}