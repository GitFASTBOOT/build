{
  "comments": [
    {
      "key": {
        "uuid": "3ceec6ba_15be9b53",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 301,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-11-07T20:00:23Z",
      "side": 1,
      "message": "The logic doesn\u0027t seem right to me. CalculateDynamicPartitionSize() should take the FSImageSize, which doesn\u0027t contain AvbMetadataSize. That is, it returns \"FSImageSize + AvbMetadataSize\" for the given FSImageSize.\n\nAfter the first pass, old_size \u003d\u003d FSImageSize + AvbMetadataSize. It then does some adjustments to FSImageSize between L285-L295, so the resulting size at L300 should be \"FSImageSize-adjusted + AvbMetadataSize\". But then L301 sends this sum to CalculateDynamicPartitionSize()?",
      "range": {
        "startLine": 300,
        "startChar": 8,
        "endLine": 301,
        "endChar": 73
      },
      "revId": "8706eadc7f414ea30aafc820f5069f0bc5b240c6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9fd1c24_8d9a1f20",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 301,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-11-07T20:08:31Z",
      "side": 1,
      "message": "(I\u0027m fine to submit this to unbreak builds. But feels like we may want some refactoring to a) compute the ideal value for FSImageSize but without any verity stuff in the first pass, then b) call CalculateDynamicPartitionSize() to add the AvbMetadataSize as the final partition size.)",
      "parentUuid": "3ceec6ba_15be9b53",
      "range": {
        "startLine": 300,
        "startChar": 8,
        "endLine": 301,
        "endChar": 73
      },
      "revId": "8706eadc7f414ea30aafc820f5069f0bc5b240c6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc7a5395_1f250eb2",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 301,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-11-07T20:47:06Z",
      "side": 1,
      "message": "Good point, this is in the wrong place(s).\n\nLine 265-266 and 300-301 should be placed singly outside the if statement below.\n\nDoing so _now_ adds risk to the work on 288-295, which probably should have been separated out into a different CL ...\n\nStuffed too many changes into this one CL.",
      "parentUuid": "f9fd1c24_8d9a1f20",
      "range": {
        "startLine": 300,
        "startChar": 8,
        "endLine": 301,
        "endChar": 73
      },
      "revId": "8706eadc7f414ea30aafc820f5069f0bc5b240c6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}