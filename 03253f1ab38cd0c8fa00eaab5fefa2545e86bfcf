{
  "comments": [
    {
      "key": {
        "uuid": "d1306e86_6422ab4a",
        "filename": "core/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 2693,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2020-07-08T02:32:44Z",
      "side": 1,
      "message": "Since this is a new partition, do we really need this compatibility symlink?",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fec88cc_4f15ebe8",
        "filename": "core/Makefile",
        "patchSetId": 6
      },
      "lineNbr": 2693,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-08T19:15:37Z",
      "side": 1,
      "message": "Technically, no ðŸ˜ž\n\nIs there a README for partitions somewhere? I want to say that if I remove this, only the following path is universal on all devices:\n\n/vendor_dlkm/etc\n/vendor/lib/modules",
      "parentUuid": "d1306e86_6422ab4a",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "517833cd_e4be39d5",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2020-07-08T02:32:44Z",
      "side": 1,
      "message": "Do we expect anything to be installed via PRODUCT_COPY_FILES?",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c54cf0c7_c6a76aaa",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1131915
      },
      "writtenOn": "2020-07-08T17:14:33Z",
      "side": 1,
      "message": "Vendors may want to install lists of kernel modules to load in certain scenarios, so I think it would be good to support PRODUCT_COPY_FILES in vendor_dlkm.",
      "parentUuid": "517833cd_e4be39d5",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17c2c9da_0c709820",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-08T19:15:37Z",
      "side": 1,
      "message": "Kernel modules should only be installed via BOARD_VENDOR_KERNEL_MODULES. Why do we want to support PRODUCT_COPY_FILES?",
      "parentUuid": "c54cf0c7_c6a76aaa",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fdb3e44b_b062c06f",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1131915
      },
      "writtenOn": "2020-07-08T19:46:28Z",
      "side": 1,
      "message": "Kernel modules, and the default load list, are installed via those macros. Partners may come up with any number of other lists of modules to be loaded at various stages of init, and they may want to keep those lists with the kernel modules themselves. If it\u0027s just a matter of including this bit here to support PRODUCT_COPY_FILES I think it\u0027s worth having it. I could easily see it being requested.",
      "parentUuid": "17c2c9da_0c709820",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6acbd2af_d4c044ff",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-08T21:15:40Z",
      "side": 1,
      "message": "Ha. I didn\u0027t know I was actually supporting PRODUCT_COPY_FILES here. I was just copy-pasting.\n\nMy concern is that it may be abused. For example, right now we only expect the following:\n\n- Device with vendor_dlkm:\n   - /vendor_dlkm/etc\n   - /vendor_dlkm/lib/modules # shouldn\u0027t be used; /vendor/lib/modules should be used instead.\n   - /vendor/lib/modules -\u003e /vendor_dlkm/lib/modules\n- Device without vendor_dlkm:\n   - /vendor_dlkm/etc -\u003e /vendor/vendor_dlkm/etc\n   - /vendor/lib/modules\n\nWe wouldn\u0027t expect devices that copy stuff to /vendor_dlkm/foo or /vendor_dlkm/lib, for example.",
      "parentUuid": "fdb3e44b_b062c06f",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b3d5169_53169cfd",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1131915
      },
      "writtenOn": "2020-07-08T21:19:01Z",
      "side": 1,
      "message": "It can be removed, worst case vendors can always put other module load lists on vendor. It doesn\u0027t have to go into vendor_dlkm (it might just be preferred to keep such lists along with the vendor kernel modules).",
      "parentUuid": "6acbd2af_d4c044ff",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5775722f_bedb2ce7",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-08T21:31:32Z",
      "side": 1,
      "message": "Do you have an example of such default load list? Is it just a text file that sits alongside with other vendor dlkms (i.e. in /vendor/lib/modules)?",
      "parentUuid": "4b3d5169_53169cfd",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f477dcba_c5b319e0",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1131915
      },
      "writtenOn": "2020-07-08T21:34:42Z",
      "side": 1,
      "message": "Yes it is just a text file. The default list, modules.load, is a list of all kernel modules installed to the partition via BOARDS_*_KERNEL_MODULES. The vendor may override the contents of the list in that file with BOARD_*_KERNEL_MODULES_LOAD.",
      "parentUuid": "5775722f_bedb2ce7",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b999fb58_7e69b7d6",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-08T23:59:38Z",
      "side": 1,
      "message": "\u003e BOARD_*_KERNEL_MODULES_LOAD\n\nSo they should be using that, not PRODUCT_COPY_FILES. Do you mean vendors may provide other lists with other names?",
      "parentUuid": "f477dcba_c5b319e0",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9983f89f_39839789",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1131915
      },
      "writtenOn": "2020-07-09T00:15:08Z",
      "side": 1,
      "message": "That is only one list. Vendors may come up with other lists of modules to load at various stages of init. salyzyn@\u0027s been experimenting with that.",
      "parentUuid": "b999fb58_7e69b7d6",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c3b46dc_39347232",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1131915
      },
      "writtenOn": "2020-07-09T00:15:48Z",
      "side": 1,
      "message": "Regardless, it doesn\u0027t have to go in the vendor_dlkm partition. Vendors can put it in init if they really want it.",
      "parentUuid": "9983f89f_39839789",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34319fb1_5709c35a",
        "filename": "core/board_config.mk",
        "patchSetId": 6
      },
      "lineNbr": 523,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-09T06:49:58Z",
      "side": 1,
      "message": "Ack. Dan, hope this answers your question.",
      "parentUuid": "0c3b46dc_39347232",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d0804a4_ee315360",
        "filename": "core/envsetup.mk",
        "patchSetId": 6
      },
      "lineNbr": 732,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2020-07-08T02:32:44Z",
      "side": 1,
      "message": "Can you combine all of these into a single KATI_obsolete_var call? That should be more readable (I\u0027m thinking of https://cs.android.com/android/platform/superproject/+/master:build/make/core/config.mk;drc\u003dc158e421ec5c6f0cbf80f12073d5a4fa7e93ad0f;l\u003d64 )",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "670d15ef_06b40fa8",
        "filename": "core/envsetup.mk",
        "patchSetId": 6
      },
      "lineNbr": 732,
      "author": {
        "id": 1121838
      },
      "writtenOn": "2020-07-08T19:15:37Z",
      "side": 1,
      "message": "Sure, thanks!",
      "parentUuid": "2d0804a4_ee315360",
      "revId": "03253f1ab38cd0c8fa00eaab5fefa2545e86bfcf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}