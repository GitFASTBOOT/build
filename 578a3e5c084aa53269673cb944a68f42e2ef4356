{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fe8eeebd_86f92087",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2021-08-09T23:52:36Z",
      "side": 1,
      "message": "+Kelvin, as the presubmit signing testis failing",
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebd6e292_bdfae2eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1455782
      },
      "writtenOn": "2021-09-02T16:48:08Z",
      "side": 1,
      "message": "Failure has been resolved!",
      "parentUuid": "fe8eeebd_86f92087",
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9472634e_058da5e6",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 522,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2021-08-09T23:52:36Z",
      "side": 1,
      "message": "hmm, why do we need to copy the vendor images over, if they are meant to be regenerated later.",
      "range": {
        "startLine": 522,
        "startChar": 28,
        "endLine": 522,
        "endChar": 47
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8b3564e_4e8dfa4e",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 522,
      "author": {
        "id": 1455782
      },
      "writtenOn": "2021-08-10T20:09:23Z",
      "side": 1,
      "message": "I expanded on this comment.\n\nThey are copied at first so that add_img_from_target_files (from the system build\u0027s otatools.zip) does not attempt to regenerate them. This cross-release image regeneration fails (b/192253131) so this is how we skip it. This is also why we need --add_missing below. Without --add_missing, the first call to add_img_from_target_files will exit immediately without doing anything once it sees some images in the `IMAGES/*` folder.\n\nThen add_img_from_target_files from the system build\u0027s otatools.zip regenerates all non-vendor images (line 1411).\n\nThen all vendor images are deleted (line 1423).\n\nThen add_img_from_target_files from the vendor build\u0027s otatools.zip regenerates the vendor images (line 1430).",
      "parentUuid": "9472634e_058da5e6",
      "range": {
        "startLine": 522,
        "startChar": 28,
        "endLine": 522,
        "endChar": 47
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "813bddce_c107fcc0",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 522,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2021-08-10T20:19:30Z",
      "side": 1,
      "message": "ah...I C. In this case, is it better to pass the vendor_partitions (as a skip list) to add_img_to_target_files to skip generate them? So you don\u0027t need to copy the images over initially; and you don\u0027t need to delete the unused images after the first run as well.",
      "parentUuid": "b8b3564e_4e8dfa4e",
      "range": {
        "startLine": 522,
        "startChar": 28,
        "endLine": 522,
        "endChar": 47
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a06950a0_c2282ab0",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 522,
      "author": {
        "id": 1455782
      },
      "writtenOn": "2021-09-01T23:26:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "813bddce_c107fcc0",
      "range": {
        "startLine": 522,
        "startChar": 28,
        "endLine": 522,
        "endChar": 47
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad0cafc0_bf45bd4d",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 1404,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2021-08-09T23:52:36Z",
      "side": 1,
      "message": "I suppose this isn\u0027t needed.",
      "range": {
        "startLine": 1404,
        "startChar": 33,
        "endLine": 1404,
        "endChar": 44
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20e4f113_5633ca92",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 1404,
      "author": {
        "id": 1455782
      },
      "writtenOn": "2021-08-10T20:10:21Z",
      "side": 1,
      "message": "Added a comment above about why this is needed.\n\nIn short, this first call to add_img_to_target_files is regenerating only \"system\" images, since vendor images already exist in the `IMAGES/` folder. It will exit immediately without doing any work if this flag is not provided.",
      "parentUuid": "ad0cafc0_bf45bd4d",
      "range": {
        "startLine": 1404,
        "startChar": 33,
        "endLine": 1404,
        "endChar": 44
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e0f1842_65ddafa8",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 1404,
      "author": {
        "id": 1455782
      },
      "writtenOn": "2021-09-01T23:26:07Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "20e4f113_5633ca92",
      "range": {
        "startLine": 1404,
        "startChar": 33,
        "endLine": 1404,
        "endChar": 44
      },
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8baa055c_45c1fa92",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 1423,
      "author": {
        "id": 1380269
      },
      "writtenOn": "2021-08-04T16:41:07Z",
      "side": 1,
      "message": "Double checking ... images_to_delete is not used to add_img_to_target_files, does add_img_to_target_files know which missing images to add?",
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52cec187_06efcc3a",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 3
      },
      "lineNbr": 1423,
      "author": {
        "id": 1455782
      },
      "writtenOn": "2021-08-04T16:46:48Z",
      "side": 1,
      "message": "Yes, it adds anything it calculates as missing.\n\nSee https://cs.android.com/android/platform/superproject/+/master:build/make/tools/releasetools/add_img_to_target_files.py;drc\u003d25ab998d82581bd4f21a2181637b102bafb9fb22;l\u003d24\n\nand the various `HasPartition` calls in\nhttps://cs.android.com/android/platform/superproject/+/master:build/make/tools/releasetools/add_img_to_target_files.py;drc\u003d25ab998d82581bd4f21a2181637b102bafb9fb22;l\u003d758\n\nIn Android R, HasPartition checks for the presence of `PARTITION/` in the target files. In Android S, HasPartition also checks for the `building_\u003cpartition\u003e_image` field in the misc_info.txt.",
      "parentUuid": "8baa055c_45c1fa92",
      "revId": "578a3e5c084aa53269673cb944a68f42e2ef4356",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}