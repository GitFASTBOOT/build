{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a5afa18d_0c13c65e",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 3719,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2022-02-17T22:44:44Z",
      "side": 1,
      "message": "It works without this because the cd key happens to be the AVB test key which is what everything is signed with in dev builds. Either we assert that assumption (easy) or do another replacement here. Unfortunately it doesn\u0027t initially look easy to use the `replace_bytes` script from the virt apex.\n\nIt also looks from the virt APEX Android.bp that the microdroid_key might not always be the AVB test key. That might mean that keeping everything in sync can be a little tricky unless there someway to define the same aliases across these two build rules?",
      "range": {
        "startLine": 3719,
        "startChar": 1,
        "endLine": 3719,
        "endChar": 49
      },
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa809489_1ad920e5",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 3719,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-18T01:25:11Z",
      "side": 1,
      "message": "Yeah, this is fragile, but I think we at least for now assume that the two keys are identical.",
      "parentUuid": "a5afa18d_0c13c65e",
      "range": {
        "startLine": 3719,
        "startChar": 1,
        "endLine": 3719,
        "endChar": 49
      },
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2851b7f_9cddf374",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 5641,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-18T01:25:11Z",
      "side": 1,
      "message": "Drop this duplicated line?",
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "148e3140_c0fe6216",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 5641,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2022-02-18T02:00:24Z",
      "side": 1,
      "message": "That\u0027s meant to be `INSTALLED_PVMFW_EMBEDDED_AVBKEY_TARGET`, I\u0027ll fix that.",
      "parentUuid": "f2851b7f_9cddf374",
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e34a5979_51c6b829",
        "filename": "tools/releasetools/add_img_to_target_files.py",
        "patchSetId": 1
      },
      "lineNbr": 376,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2022-02-17T22:44:44Z",
      "side": 1,
      "message": "This should be the key that signs the virt APEX? But I don\u0027t see how to get access to it from here :/",
      "range": {
        "startLine": 376,
        "startChar": 55,
        "endLine": 376,
        "endChar": 90
      },
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0ef5c93_421b45ab",
        "filename": "tools/releasetools/add_img_to_target_files.py",
        "patchSetId": 1
      },
      "lineNbr": 376,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-18T01:25:11Z",
      "side": 1,
      "message": "I think we can\u0027t have access to the very key here.\n\nIt is available in sign_target_files_apks via the `--extra_apex_payload_key` option. There, you can have access to the key for the com.android.virt APEX, extract the public key from the key, and use it to amend pvmfw.img.",
      "parentUuid": "e34a5979_51c6b829",
      "range": {
        "startLine": 376,
        "startChar": 55,
        "endLine": 376,
        "endChar": 90
      },
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "060e9303_c10a8b9d",
        "filename": "tools/releasetools/add_img_to_target_files.py",
        "patchSetId": 1
      },
      "lineNbr": 376,
      "author": {
        "id": 1139038
      },
      "writtenOn": "2022-02-18T02:00:24Z",
      "side": 1,
      "message": "I had been thinking that might be where this has to move. I was looking at the keys if `apex_keys` and there was `com.android.virt` as well as `com.google.android.virt`. What\u0027s the difference?",
      "parentUuid": "e0ef5c93_421b45ab",
      "range": {
        "startLine": 376,
        "startChar": 55,
        "endLine": 376,
        "endChar": 90
      },
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "78595836_7f46c7e6",
        "filename": "tools/releasetools/add_img_to_target_files.py",
        "patchSetId": 1
      },
      "lineNbr": 376,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-18T02:09:07Z",
      "side": 1,
      "message": "Ah, did the two have different keys? When an APEX is signed for an OEM (e.g. Pixel), it usually is renamed to signify that it\u0027s a re-signed one.\n\nBut the problem here is that the google name is chosen by the Pixel team, and therefore shouldn\u0027t be used here in AOSP. I wish there\u0027s a relationship between the two names so that we can access the key of the google one via the aosp name.\n\nJooyung, do you have any thoughts?",
      "parentUuid": "060e9303_c10a8b9d",
      "range": {
        "startLine": 376,
        "startChar": 55,
        "endLine": 376,
        "endChar": 90
      },
      "revId": "652ebcc43c03fe26a8ad560ef96e24318b399823",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}