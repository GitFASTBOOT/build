{
  "comments": [
    {
      "key": {
        "uuid": "9e5c23c0_3b0fd3cc",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2351,
      "author": {
        "id": 1178083
      },
      "writtenOn": "2018-04-16T22:22:12Z",
      "side": 1,
      "message": "This is going to have a similar problem as was raised on go/oag/665564.\n\nsystem/tools/bpt (bpttool) is not in AOSP currently even though add_img_to_target_files uses it because Android Things is not in AOSP. It seems other usages of $(BPTTOOL) in aosp/master are currently guarded by \"ifdef BOARD_BPT_INPUT_FILES\" (which is essentially \"ifdef IS_ANDROID_THINGS\"). http://cs/aosp-master/build/make/core/Makefile?l\u003d1869\n\nIf otatools.zip is not meant to be board-specific then do we have to shift bpttool into AOSP? Is there an alternative?",
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6f4188d_19b6a858",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2351,
      "author": {
        "id": 1178083
      },
      "writtenOn": "2018-04-16T23:11:28Z",
      "side": 1,
      "message": "Looks like bpttool is in AOSP, it\u0027s just not in the manifest. It\u0027s also out of date because we\u0027re treating it like an iot_project so the automerger goes backwards, nyc-iot-dev -\u003e oc-mr1-iot-dev -\u003e (internal) master. Will need to merge internal to AOSP master.",
      "parentUuid": "9e5c23c0_3b0fd3cc",
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3342e8df_9bbe3e1f",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 2351,
      "author": {
        "id": 1178083
      },
      "writtenOn": "2018-04-16T23:19:29Z",
      "side": 1,
      "message": "Filed b/78137118 to get the bpt repo all fixed up.",
      "parentUuid": "f6f4188d_19b6a858",
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "570ba1c5_bfb66093",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-04-16T18:23:10Z",
      "side": 1,
      "message": "Since we don\u0027t need to work around existing target-files.zip in master, it looks cleaner to pack these files into target-files zip via Makefile",
      "range": {
        "startLine": 253,
        "startChar": 33,
        "endLine": 253,
        "endChar": 52
      },
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fd0dd4b_3c740d69",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1178083
      },
      "writtenOn": "2018-04-16T18:33:35Z",
      "side": 1,
      "message": "This is generated by add_img_to_target_files - here http://cs/android/build/make/tools/releasetools/add_img_to_target_files.py?l\u003d429 - so the best I could do is change there to put it directly into META/partition-table.bpt instead of IMAGES/. That still leaves the logic in common.py but lets us get rid of this...definitely better.\n\nOr are you suggesting packing all of the individual BOARD_BPT_INPUT_FILES instead of the final bpt? If we did that we\u0027d still have to fiddle with board_bpt_input_files when generating misc_info.txt, and also deal with things like flattening the paths and/or filename collisions. I kind of like the idea of using the final one like this.",
      "parentUuid": "570ba1c5_bfb66093",
      "range": {
        "startLine": 253,
        "startChar": 33,
        "endLine": 253,
        "endChar": 52
      },
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1784188_efdb9754",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-04-16T19:19:51Z",
      "side": 1,
      "message": "If the file doesn\u0027t needs to be regenerated due to the change to system images (based on my read of the codes, that seems to be the case?), we can keep the generated file in META/partition-table.bpt.\n\n(The goal in my mind is to allow re-generating all the images even after `zip -d target-files.zip IMAGES/`.)",
      "parentUuid": "4fd0dd4b_3c740d69",
      "range": {
        "startLine": 253,
        "startChar": 33,
        "endLine": 253,
        "endChar": 52
      },
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1b7fe08_b655fd12",
        "filename": "tools/releasetools/sign_target_files_apks.py",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 1178083
      },
      "writtenOn": "2018-04-16T20:15:28Z",
      "side": 1,
      "message": "Nope, it doesn\u0027t need to be regenerated. Let me make a separate change (so I can cherry-pick it back easily) to put the file directly in META/partition-table.bpt instead and delete this chunk.",
      "parentUuid": "a1784188_efdb9754",
      "range": {
        "startLine": 253,
        "startChar": 33,
        "endLine": 253,
        "endChar": 52
      },
      "revId": "aad3d22a9d036745570712a9806179cd1e609554",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}