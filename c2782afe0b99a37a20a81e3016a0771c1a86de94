{
  "comments": [
    {
      "key": {
        "uuid": "4ac1b31c_298e8d25",
        "filename": "core/goma.mk",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1076769
      },
      "writtenOn": "2016-07-19T06:30:59Z",
      "side": 1,
      "message": "Just a note - not an objection: Are you planning to use GOMA_HERMETIC\u003dfallback on the bot? I\u0027m not sure if error-for-developers-and-fallback-for-bot config is the best. Considering the motivation of bots is to find build failures before the build of end-developers fails, IMO fallback-for-developers-and-error-for-bots is the best option (fyi, this is how Chromium\u0027s build system is configured). However, I also understand setting GOMA_HERMETIC\u003derror on bots would be troublesome before goma on bots becomes stable. Maybe setting GOMA_HERMETIC\u003dfallback by default would be an option, but I\u0027m not sure.",
      "revId": "c2782afe0b99a37a20a81e3016a0771c1a86de94",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a6037e5_25ed6523",
        "filename": "core/goma.mk",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1076194
      },
      "writtenOn": "2016-07-19T16:01:32Z",
      "side": 1,
      "message": "I\u0027d prefer to be able to use GOMA_HERMETIC\u003derror everywhere, but doing this would require that GOMA can pick up toolchains from the build itself -- i.e. when we\u0027re testing a CL that modifies the toolchain, GOMA would pick up the new toolchain from the CL and use it. I believe GOMA can\u0027t do that with current architecture, so that\u0027s why we need fallback mode.\n\nA question: When we update the toolchain in Android with a commit, does Goma pick it up immediately or is there some lag? If the latter, we actually want GOMA_HERMETIC\u003dfallback everywhere, because it\u0027s then inevitable that there will be times when we can\u0027t compile on the goma farm.\n\nThe last option, GOMA_HERMETIC\u003doff, is generally a recipe for trouble since it doesn\u0027t guarantee you get the right compiler. But, do we really know better than the user here? Maybe the user just wants to use the option for debugging goma performance?\n\nI suggest we just delete all of this code for simplicity. GOMA can manage the options. Don\u0027t set GOMA_HERMETIC at all, and goma will default to \"fallback\" -- this is new as of 4 months ago: https://chrome-internal-review.googlesource.com/#/c/251515/\n\nThoughts from others on this?",
      "parentUuid": "4ac1b31c_298e8d25",
      "revId": "c2782afe0b99a37a20a81e3016a0771c1a86de94",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a6037e5_7620b504",
        "filename": "core/goma.mk",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1104568
      },
      "writtenOn": "2016-07-19T17:38:02Z",
      "side": 1,
      "message": "Not setting GOMA_HERMETIC at all and defaulting to \"fallback\" make sense to me. Dan and Shinichiro, any other concern if we do what david suggested?",
      "parentUuid": "6a6037e5_25ed6523",
      "revId": "c2782afe0b99a37a20a81e3016a0771c1a86de94",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a6037e5_414e0695",
        "filename": "core/goma.mk",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2016-07-19T20:26:48Z",
      "side": 1,
      "message": "Sure, always using fallback seems fine",
      "parentUuid": "6a6037e5_7620b504",
      "revId": "c2782afe0b99a37a20a81e3016a0771c1a86de94",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ac1b31c_e91f155f",
        "filename": "core/goma.mk",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1076769
      },
      "writtenOn": "2016-07-20T04:00:24Z",
      "side": 1,
      "message": "\u003e does Goma pick it up immediately\n\nNo, there\u0027s some lag. Ideally, compiler changes should be automatically tested on the bot with goma before they are actually delivered to developers. IIRC this is what Chromium is doing. But for now, setting fallback by default makes sense to me.",
      "parentUuid": "6a6037e5_414e0695",
      "revId": "c2782afe0b99a37a20a81e3016a0771c1a86de94",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}