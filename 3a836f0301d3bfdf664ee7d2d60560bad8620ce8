{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7565a691_9c2d528c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-01-19T01:38:18Z",
      "side": 1,
      "message": "I use `RBC_PRODUCT_CONFIG\u003d1 get_build_var xxx` often when debugging, could we narrow this down to only use kati when the converter hasn\u0027t been built?",
      "revId": "3a836f0301d3bfdf664ee7d2d60560bad8620ce8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5beadb63_5f6e2c2d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2022-01-19T17:33:40Z",
      "side": 1,
      "message": "I hesitate to do that because this means the build uses the old converter. May I ask how do you use this for debugging?",
      "parentUuid": "7565a691_9c2d528c",
      "revId": "3a836f0301d3bfdf664ee7d2d60560bad8620ce8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f59a48d0_b17994c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-01-19T23:37:57Z",
      "side": 1,
      "message": "For example, here\u0027s a current issue on an internal product (codename stripped):\n\n$ diff \u003c(get_build_var PRODUCT_COPY_FILES | tr \" \" \"\\n\") \u003c(RBC_PRODUCT_CONFIG\u003d1 get_build_var PRODUCT_COPY_FILES | tr \" \" \"\\n\")\n\u003c device/google/CODENAME-kernel/5.10-arm64/Image:kernel\n---\n\u003e [\"device/google/CODENAME-kernel/5.10-arm64/Image\"]:kernel\n\nThe get_build_var allows me to compare the values of product variables with/without RBC without running a full `m nothing`, so it\u0027s faster.\n\nWhat do you mean by \"the old converter\"? I was thinking you\u0027d just fall back to kati if the converter wasn\u0027t built, and use it otherwise. That way it would be built after the first `m nothing`, and get_build_var will work with RBC afterwards.\n\nAlternatively, maybe we could make it so kati runs a $(shell) command that builds mk2rbc if necessary?",
      "parentUuid": "5beadb63_5f6e2c2d",
      "revId": "3a836f0301d3bfdf664ee7d2d60560bad8620ce8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1c76d9b_ecb5ba1b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2022-01-29T01:57:59Z",
      "side": 1,
      "message": "First, I think get_build_var is a horrible hack and I don\u0027t want to aggravate it. By \"old\" I mean the following scenario: using the shortcut you described, you find the difference requiring the converter fix. You make a tentative fix and rerun the shortcut. The difference remains, and you go back to figure out why the fix doesn\u0027t work. Actually, it does, you just forgot to rebuild the converter.",
      "parentUuid": "f59a48d0_b17994c4",
      "revId": "3a836f0301d3bfdf664ee7d2d60560bad8620ce8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e2bef4a_c7301063",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-01-31T22:09:58Z",
      "side": 1,
      "message": "In that case, could we just add the mk2rbc/rbcrun runMicroFactory() calls to dumpMakeVars() as well as runMakeProductConfig? That way it will be built even during setup. The mk2rbc/rbcrun builds seem very fast so it shouldn\u0027t be a big performance hit.",
      "parentUuid": "d1c76d9b_ecb5ba1b",
      "revId": "3a836f0301d3bfdf664ee7d2d60560bad8620ce8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec9ebdcb_4df44d16",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-03-30T19:46:33Z",
      "side": 1,
      "message": "Now that aosp/2044703 is merged, this change shouldn\u0027t be necessary.",
      "parentUuid": "1e2bef4a_c7301063",
      "revId": "3a836f0301d3bfdf664ee7d2d60560bad8620ce8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}