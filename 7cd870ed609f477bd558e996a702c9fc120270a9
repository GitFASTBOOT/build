{
  "comments": [
    {
      "key": {
        "uuid": "e38efcc7_2936cd60",
        "filename": "core/prebuilt_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2019-03-19T18:23:47Z",
      "side": 0,
      "message": "I think this is sometimes true for JAVA_LIBRARIES modules?",
      "revId": "7cd870ed609f477bd558e996a702c9fc120270a9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "295836d7_062ef821",
        "filename": "core/prebuilt_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1060667
      },
      "writtenOn": "2019-03-19T20:09:57Z",
      "side": 0,
      "message": "I did a build with UNSAFE_DISABLE_HIDDENAPI_FLAGS\u003dfalse and couldn\u0027t find any modules that actually triggered this line, and so conveniently decided to put it in app_prebuilt_internal.mk and call it a day. Now that I look at the code again, this code actually seems to be meaningless?\n\nThe only place that non_system_module is set is here:\nhttp://cs/android/build/make/core/base_rules.mk?l\u003d99\u0026rcl\u003db378d4d0a580322de710feb35f16d1bb114e6ba2\n\nbut, base_rules.mk is included below, in line 127, which means non_system_module is always empty here?\n\nWDYT?",
      "parentUuid": "e38efcc7_2936cd60",
      "revId": "7cd870ed609f477bd558e996a702c9fc120270a9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1b64259_1ab886f6",
        "filename": "core/prebuilt_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2019-03-19T20:20:48Z",
      "side": 0,
      "message": "Looks like this was broken by Iebdd3ec8c643be3d9877b7a96cbdd83465fa3878.",
      "parentUuid": "295836d7_062ef821",
      "revId": "7cd870ed609f477bd558e996a702c9fc120270a9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9bcd1cf_7602e692",
        "filename": "core/prebuilt_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1060667
      },
      "writtenOn": "2019-03-19T20:39:54Z",
      "side": 0,
      "message": "Ah, I now remember why I *conveniently* assumed it was only for APPS. All the references to the module_run_appcompat flag are inside the \u0027ifeq ($(LOCAL_MODULE_CLASS),APPS)\u0027 clause starting from line 242.\n\nMoving this in app_prebuilt_internal.mk so that it is executed after the base_rules.mk run.\n\nFWIW, I moved this to under \u0027include $(BUILD_SYSTEM)/base_rules.mk\u0027 line below in the current code to see which modules go through it and found ETC, APPS, and EXECUTABLES modules were logged.",
      "parentUuid": "f1b64259_1ab886f6",
      "revId": "7cd870ed609f477bd558e996a702c9fc120270a9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}