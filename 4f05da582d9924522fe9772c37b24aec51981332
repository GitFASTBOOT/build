{
  "comments": [
    {
      "key": {
        "uuid": "dfb861c8_081f4cbf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2017-07-20T00:56:36Z",
      "side": 1,
      "message": "This statement is incorrect. They\u0027re properly identified as app:platform, because this has nothing to do with which partition they\u0027re on -- it\u0027s whether they\u0027re using one of the SDKs or not. app:platform means that they\u0027re compiling against the full platform API, which is not guaranteed to be stable.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 12
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31ef68df_da826a5a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2017-07-20T02:24:21Z",
      "side": 1,
      "message": "vendor apks must not use full platform API, otherwise framework-only OTA will break the vendor apks. So, i think we can\u0027t mark them as app:platform.",
      "parentUuid": "dfb861c8_081f4cbf",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 12
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "659cd814_05dd04ae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2017-07-20T03:56:12Z",
      "side": 1,
      "message": "I agree, but \"app:platform\" is a result of which API they\u0027re using, we shouldn\u0027t change it until they\u0027re actually using something other than the full platform API.",
      "parentUuid": "31ef68df_da826a5a",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 12
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "414df170_70cede94",
        "filename": "core/install_jni_libs_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2017-07-20T00:56:36Z",
      "side": 1,
      "message": "This should still be app:platform, since LOCAL_USE_VNDK does not affect which SDK you\u0027re building against. We could consider allowing native:vendor as an allowed_type however.",
      "range": {
        "startLine": 117,
        "startChar": 16,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98f2191a_377a0c0f",
        "filename": "core/install_jni_libs_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2017-07-20T02:24:21Z",
      "side": 1,
      "message": "I can\u0027t understand what you mean. apps in vendor partition should be treated differently than apps in system partition.\n\n\u003e We could consider allowing native:vendor as an allowed_type however.\n\nAre you saying that app:platform -\u003e native:vendor should be allowed? Isn\u0027t it a Treble violation?",
      "parentUuid": "414df170_70cede94",
      "range": {
        "startLine": 117,
        "startChar": 16,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bc940ae_05b753e7",
        "filename": "core/install_jni_libs_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2017-07-20T03:56:12Z",
      "side": 1,
      "message": "I\u0027m saying this problem happens well before we\u0027re doing link type checking -- unless we\u0027re choosing something other than the full platform API based on LOCAL_USE_VNDK, we shouldn\u0027t be changing what link type it claims to be.\n\nSo if we\u0027re going to require using one of the SDKs, we\u0027d need to implement that in a bunch of places, but particularly in places like java_common.mk where it sets up my_bootclasspath. (There\u0027s a separate link_type check for java -\u003e java code in java_common.mk too)\n\n(Using LOCAL_USE_VNDK to change the API seems like the wrong choice -- since the name is talking about native code, but it may be something using very similar logic, or just LOCAL_VENDOR_MODULE)",
      "parentUuid": "98f2191a_377a0c0f",
      "range": {
        "startLine": 117,
        "startChar": 16,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a478531_53601493",
        "filename": "core/install_jni_libs_internal.mk",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2017-07-20T04:52:57Z",
      "side": 1,
      "message": "Ok. You mean that, since vendor apps are still allowed to use all platform \u0027Java\u0027 APIs, they should be marked as app:platform until we have something like Vendor-SDK and force them to depend on it.\n\nThen, I will add native:vendor to allowed_types of app:platform.",
      "parentUuid": "9bc940ae_05b753e7",
      "range": {
        "startLine": 117,
        "startChar": 16,
        "endLine": 117,
        "endChar": 26
      },
      "revId": "4f05da582d9924522fe9772c37b24aec51981332",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}