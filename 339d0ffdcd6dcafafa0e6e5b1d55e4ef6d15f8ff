{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "21e12eda_de2ab346",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2023-03-17T02:43:21Z",
      "side": 1,
      "message": "We used to have something very similar to this as the [partial source] PDK, and removed it because it complicated a lot of things, did not work with Soong, and was quite slow due to needing to look through the full zip file at analysis time. Based on the current logic here, why aren\u0027t you just disabling building the system[_ext] images and specifying prebuilts for those images instead?",
      "revId": "339d0ffdcd6dcafafa0e6e5b1d55e4ef6d15f8ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cffaa30_0d36fbd1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2023-03-17T05:05:26Z",
      "side": 1,
      "message": "You can find most of the details from go/source-tree-treble-1p, but general idea is that in AB we can utilize chained build, to have one common partial cf build which targets system and system_ext, and other cf build with specific target (such as phone) builds system and system_ext image, with most of modules just being copied from the common partial cf build. For now we are not considering to replace images as prebuilt, as some of the modules from system_ext won\u0027t be used from all targets, and also we\u0027d like to keep use of packaging logic from current build instead of merging artifact with `merge_target_files`.",
      "parentUuid": "21e12eda_de2ab346",
      "revId": "339d0ffdcd6dcafafa0e6e5b1d55e4ef6d15f8ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80c7c8fb_da77e879",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2023-03-17T05:33:53Z",
      "side": 1,
      "message": "My reading of that proposal (which didn\u0027t seem to go through an approval process) was for a full split which would enable using prebuilt partition images. Using partial files and partial sources becomes far more complicated, risky to build correctness, and expensive.\n\nWith partial replacements you need to verify that the configs that build the rest of the files are identical with the current build, otherwise there could be mismatches between prebuilts and source built files (as there is not a stable treble boundary within the partition). Since you can\u0027t just use installed prebuilts to build against, many dependencies of source built things will need to be built again.\n\nThis also makes things like licensing, sbom compliance, debug symbols, etc much trickier, as all of that information would need to be extracted somehow and patched through the build.",
      "parentUuid": "4cffaa30_0d36fbd1",
      "revId": "339d0ffdcd6dcafafa0e6e5b1d55e4ef6d15f8ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91e32e10_d4060b4c",
        "filename": "core/main.mk",
        "patchSetId": 2
      },
      "lineNbr": 150,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2023-03-17T02:43:21Z",
      "side": 1,
      "message": "This is missing all the inputs used by the script (including all the directories it looks through to find the target_files zip). It\u0027s also missing the list of all the files that will be written (which should be in .KATI_IMPLICIT_OUTPUTS).",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 150,
        "endChar": 16
      },
      "revId": "339d0ffdcd6dcafafa0e6e5b1d55e4ef6d15f8ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07d13977_14f8f456",
        "filename": "core/main.mk",
        "patchSetId": 2
      },
      "lineNbr": 150,
      "author": {
        "id": 1413436
      },
      "writtenOn": "2023-03-17T05:05:26Z",
      "side": 1,
      "message": "Thx. We expect some of the inputs from the scripts are not required from all cases (for now we target with ab build, but we\u0027d like to cover more cases containing partners if possible), and this will be updated once we have more common target inputs. Let me check about KATI_IMPLICIT_OUTPUTS as I was not aware of it. Thx.",
      "parentUuid": "91e32e10_d4060b4c",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 150,
        "endChar": 16
      },
      "revId": "339d0ffdcd6dcafafa0e6e5b1d55e4ef6d15f8ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bd59183_3d9986d0",
        "filename": "core/main.mk",
        "patchSetId": 2
      },
      "lineNbr": 150,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2023-03-17T05:33:53Z",
      "side": 1,
      "message": "All used inputs are required for correct incremental builds.",
      "parentUuid": "07d13977_14f8f456",
      "range": {
        "startLine": 150,
        "startChar": 0,
        "endLine": 150,
        "endChar": 16
      },
      "revId": "339d0ffdcd6dcafafa0e6e5b1d55e4ef6d15f8ff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}