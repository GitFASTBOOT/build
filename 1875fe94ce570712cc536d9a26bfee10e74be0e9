{
  "comments": [
    {
      "key": {
        "uuid": "0dfe69e1_aa604d09",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-07-30T03:49:39Z",
      "side": 1,
      "message": "Could you please do this via ADDITIONAL_PRODUCT_PROPERTIES in core/main.mk?",
      "revId": "1875fe94ce570712cc536d9a26bfee10e74be0e9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c42d8db0_c1aac4aa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-07-30T04:08:37Z",
      "side": 1,
      "message": "tried in PS1. Is there a clean way to let ADDITIONAL_PRODUCT_PROPERTIES depend on INSTALLED_RADIOIMAGE_TARGET? Otherwise it won\u0027t include the bootloader \u0026 radio images.",
      "parentUuid": "0dfe69e1_aa604d09",
      "revId": "1875fe94ce570712cc536d9a26bfee10e74be0e9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa217de3_d5092ced",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-07-30T04:13:09Z",
      "side": 1,
      "message": "e.g. the variable AB_OTA_PARTITIONS is updated in \nhttps://source.corp.google.com/android/vendor/google_devices/coral/prebuilts/Android.mk;l\u003d18",
      "parentUuid": "c42d8db0_c1aac4aa",
      "revId": "1875fe94ce570712cc536d9a26bfee10e74be0e9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "275c0ac4_ca5b06d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-07-30T04:16:26Z",
      "side": 1,
      "message": "Adding INSTALLED_RADIOIMAGE_TARGET to the dependency list doesn\u0027t make it possible to modify AB_OTA_PARTITIONS in Android.mk files.\n\nAnd I don\u0027t think it\u0027s a good idea to let Android.mk modify global configs like AB_OTA_PARTITIONS. It should be done in BoardConfig.mk files.",
      "parentUuid": "c42d8db0_c1aac4aa",
      "revId": "1875fe94ce570712cc536d9a26bfee10e74be0e9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfaaac2a_cc57e30c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-07-30T04:26:41Z",
      "side": 1,
      "message": "If you looked at https://source.corp.google.com/android/vendor/google_devices/coral/prebuilts/Android.mk;l\u003d18, the AB_OTA_PARTITIONS list is already modified in Android.mk (by extending the original list with AB_OTA_BOOTLOADER_PARTITIONS). Here we are just dumping the modified list.\n\nI assume many partners have been modifying the AB_OTA_PARTITIONS in android.mk... But we still want to set the product property in a common place, so partners require minimal work to support gki.\n\nWe can file a separate bug to investigate if it\u0027s possible to move the entire list of AB_OTA_PARTITIONS into BoardConfig.mk for new devices.",
      "parentUuid": "275c0ac4_ca5b06d7",
      "revId": "1875fe94ce570712cc536d9a26bfee10e74be0e9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9e7643f_3a891069",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-07-30T04:43:44Z",
      "side": 1,
      "message": "I don\u0027t think is impossible or difficult to set AB_OTA_PARTITIONS in BoardConfig.mk. Why do you want to do that only for new devices? I found that we have only 11 places to fix. https://source.corp.google.com/search?q\u003dAB_OTA_PARTITIONS%20f:Android%5C.mk\u0026sq\u003dpackage:%5Eandroid$\n\nPartners could do the same.\n\nIn addition, I think https://source.android.com/devices/tech/ota/ab/ab_implement#build-variables should be updated to make the places where the build variables mean to be set explicit. Most of the variables in the page (like PRODUCT_PACKAGES, BOARD_USES_RECOVERY_AS_BOOT, etc.) are already not settable in Android.mk. AB_OTA_PARTITIONS doesn\u0027t need to be an exception.",
      "parentUuid": "cfaaac2a_cc57e30c",
      "revId": "1875fe94ce570712cc536d9a26bfee10e74be0e9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}