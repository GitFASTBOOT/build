{
  "comments": [
    {
      "key": {
        "uuid": "349a0eef_36ad28a9",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2016-01-29T20:53:41Z",
      "side": 1,
      "message": "Is this some random environment variable? I assume yes.\n\nWe need a check later in the build (once we know whether BRILLO is set) that errors out if this is set and BRILLO isn\u0027t.\n\nWe should make the places that use java/javac fail early if this is set, even if java is available.",
      "revId": "5faad2f88213061021237c901fe7df05d1fa24e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "749006cb_b2dea891",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1052976
      },
      "writtenOn": "2016-01-29T20:56:36Z",
      "side": 1,
      "message": "This is set in the brillo_base.mk, not some random external variable.\n\nI could check if BRILLO is set but its not really a Brillo related thing. Its a \u0027dont check for java\u0027 thing.",
      "parentUuid": "349a0eef_36ad28a9",
      "revId": "5faad2f88213061021237c901fe7df05d1fa24e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "749006cb_f2bf5017",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2016-01-29T21:04:53Z",
      "side": 1,
      "message": "Ah, I forgot how late this check was. In that case, we need to explicitly initialize JAVA_NOT_REQUIRED sometime before the envsetup.mk so that the environment variable isn\u0027t read on non-brillo builds.\n\n(brillo_base.mk is a product makefile, it\u0027s not allowed to set any variables other than the ones listed in _product_var_list in product.mk. It needs to be moved to the brillo-common BoardConfig.mk)\n\nWe should still fail out in java related calls so that actually get a build break on the builders if brillo happens to use java. If brillo does happen to use java somewhere still, this check should stay until that\u0027s not the case.",
      "parentUuid": "749006cb_b2dea891",
      "revId": "5faad2f88213061021237c901fe7df05d1fa24e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9462dabe_c07a74c2",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1052976
      },
      "writtenOn": "2016-01-29T21:10:44Z",
      "side": 1,
      "message": "Brillo doesn\u0027t have a makefile common to all boards but even I make one and set JAVA_NOT_REQUIRED there, doesn\u0027t this CL still stand?\n\nWe can put an extra check around the javac tools if you want. I think that would be a separate CL though.",
      "parentUuid": "749006cb_f2bf5017",
      "revId": "5faad2f88213061021237c901fe7df05d1fa24e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "749006cb_adf72979",
        "filename": "core/main.mk",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2016-01-29T22:56:49Z",
      "side": 1,
      "message": "The brillo_base.mk discussion can happen elsewhere -- that product file is already broken for many other variables.\n\nI do want \"JAVA_NOT_REQUIRED :\u003d \" somewhere between the start of this makefile and us loading the product makefiles, to ensure that we\u0027re not reading an environment variable here.\n\nWhat I really don\u0027t want to see is the build depending on java, but us not checking to see if the java we\u0027re running is supported. Maybe we should just make sure that the brillo build servers don\u0027t have any java installed, because I don\u0027t know how we could prevent all instances of this otherwise. There\u0027s nothing stopping someone from writing more host tools in java right now.",
      "parentUuid": "9462dabe_c07a74c2",
      "revId": "5faad2f88213061021237c901fe7df05d1fa24e1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}