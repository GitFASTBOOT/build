{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "09dc713d_c2099289",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-14T02:06:11Z",
      "side": 1,
      "message": "You\u0027ll need to be careful since you also need to test in presubmit since this code is used in non-Bazel contexts.",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 4
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a07cdae_7f559fb0",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-14T02:06:11Z",
      "side": 1,
      "message": "The tests seems to be distributed across several projects. Can\u0027t we add a shared test utility library instead (libbase otherwise)? Also, it might be better to have a function that is reveals intent a bit better? I\u0027m thinking of something similar to google3\u0027s helpers:\n\n* http://google3/devtools/build/runtime/get_runfiles_dir.h\n* http://google3/java/com/google/devtools/build/runtime/RunfilesPaths.java\n\nThe function name (and behavior) should make sense in both Bazel and non-Bazel contexts.\n\nOne thing I don\u0027t quite understand is what creates the symlinks to the data files. Do these appear in module-info.json for Atest to symlink? I don\u0027t remember us adding that behavior.\n\nAlso what is the data file path relative to? In Bazel, IIUC, it should be relative to the workspace root. Is that the case here? Will this implementation work or be adaptable when the Android.bp file is genuinely written in Bazel?",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16fb679c_d395cf42",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1077574
      },
      "writtenOn": "2021-12-21T04:21:51Z",
      "side": 1,
      "message": "from libbase readme, there are a lot of restrictions to be included in libbase. It is suggested \"to start using your routine just in your project, and let it \"graduate\" after you\u0027re certain that the API is solid.\"\nhttps://cs.android.com/android/platform/superproject/+/master:system/libbase/README.md;l\u003d1\nI am not sure if there is a better place for the routine. \n\nYes, data files are included in module-info installed path along with test binary. They live relative to the test binary. Here is the tree structure of bazel sandbox for aapt2_test https://paste.googleplex.com/6703000996282368\n\nFor this example, the test binary real path is /usr/local/google/home/weisu/src/aosp-master-with-phones/out/host/linux-x86/testcases/aapt2_tests/x86_64 (what android::base::GetExecutablePath returns) \nBut we want \n/usr/local/google/home/weisu/.cache/bazel/_bazel_weisu/b37f4c6e619fad0b2cce4bfc3bada009/sandbox/linux-sandbox/9/execroot/__main__/bazel-out/k8-fastbuild/bin/frameworks/base/tools/aapt2/tradefed_test_aapt2_tests_host.sh.runfiles/__main__/frameworks/base/tools/aapt2/aapt2_tests/host/testcases/aapt2_tests/x86_64/ (what program_invocation_name returns)",
      "parentUuid": "3a07cdae_7f559fb0",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83bbd99e_b66a005b",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-21T22:42:13Z",
      "side": 1,
      "message": "SG. Did you consider platform_testing/libraries/ as an alternative location?\n\nI\u0027m fine with this approach in the short term but will need others to vet the decision.",
      "parentUuid": "16fb679c_d395cf42",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d644912_f49054cc",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 27,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-14T02:06:11Z",
      "side": 1,
      "message": "Unnecessary else.",
      "range": {
        "startLine": 27,
        "startChar": 4,
        "endLine": 27,
        "endChar": 8
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d9cb1669_77077309",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 27,
      "author": {
        "id": 1077574
      },
      "writtenOn": "2021-12-21T04:21:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4d644912_f49054cc",
      "range": {
        "startLine": 27,
        "startChar": 4,
        "endLine": 27,
        "endChar": 8
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c91b670_bbd2cc25",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 32,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-14T02:06:11Z",
      "side": 1,
      "message": "Isn\u0027t there a more portable way to achieve the same effect?",
      "range": {
        "startLine": 32,
        "startChar": 23,
        "endLine": 32,
        "endChar": 46
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a1a5f64_274f07de",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-14T02:06:11Z",
      "side": 1,
      "message": "Inline variable.",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 15
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "144a0d65_15baf189",
        "filename": "tools/zipalign/tests/src/util.cpp",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1077574
      },
      "writtenOn": "2021-12-21T04:21:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6a1a5f64_274f07de",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 15
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d25523c0_f831f7f9",
        "filename": "tools/zipalign/tests/src/util.h",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2021-12-14T02:06:11Z",
      "side": 1,
      "message": "Add detailed documentation.",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "8fc3fe25d0ea4a3cbdfc6699ba071ed669b8a2fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}