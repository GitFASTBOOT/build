{
  "comments": [
    {
      "key": {
        "uuid": "ad467b74_f0ab67ce",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 176,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-05-13T16:21:19Z",
      "side": 1,
      "message": "Is this true?  I thought that the other CL makes them always install to /default.prop (since that\u0027s the file that init loads).  We should drop the symlink too if it\u0027s still being created.  It was never actually needed since init doesn\u0027t open and files through a symlink.",
      "range": {
        "startLine": 175,
        "startChar": 44,
        "endLine": 176,
        "endChar": 65
      },
      "revId": "f902d5c11e1e7cecf383350cdd052f72fd0027c0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "504bf452_a294bc9f",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 176,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-05-13T16:27:50Z",
      "side": 1,
      "message": "This is here because I did the change in two steps... just to make sure I am not making any mistake.\n\nI will try to drop the symlink in a follow-up cl. This change is already scary for me :)",
      "parentUuid": "ad467b74_f0ab67ce",
      "range": {
        "startLine": 175,
        "startChar": 44,
        "endLine": 176,
        "endChar": 65
      },
      "revId": "f902d5c11e1e7cecf383350cdd052f72fd0027c0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18137c36_7dd83b81",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 176,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-05-13T16:32:31Z",
      "side": 1,
      "message": "\u003e since init doesn\u0027t open and files through a symlink\n\nI didn\u0027t know that, but if so, that might be a reason to keep this. For the devices that doesn\u0027t have a dedicated vendor partition, /vendor/build.prop is actually a symlink for /system/vendor/build.prop. But since init won\u0027t follow the symlink, we need to put vendor system properties into /system/build.prop. Do you think that\u0027s better? IMHO, that looks dirtier than keeping /default.prop.",
      "parentUuid": "504bf452_a294bc9f",
      "range": {
        "startLine": 175,
        "startChar": 44,
        "endLine": 176,
        "endChar": 65
      },
      "revId": "f902d5c11e1e7cecf383350cdd052f72fd0027c0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae2a5436_96fc34eb",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 176,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-05-13T17:39:17Z",
      "side": 1,
      "message": "Yes, that\u0027s in part why we have /odm/etc/build.prop instead of /odm/build.prop, since the former doesn\u0027t suffer from that problem.\n\n\u003e IMHO, that looks dirtier than keeping /default.prop.\n\nI think we\u0027re thinking of different situations then.\nFor Treble, I think we\u0027re on the same page.\nFor Non-Treble, I think we should merged everything into /system/build.prop, include /default.prop.  What prevents us from merging those two files for non-Treble?",
      "parentUuid": "18137c36_7dd83b81",
      "range": {
        "startLine": 175,
        "startChar": 44,
        "endLine": 176,
        "endChar": 65
      },
      "revId": "f902d5c11e1e7cecf383350cdd052f72fd0027c0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9688ab8_b446fb00",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 176,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-05-13T17:52:51Z",
      "side": 1,
      "message": "\u003e What prevents us from merging those two files for non-Treble?\n\nI was uncomfortable with having vendor sysprops in /system/build.prop. Then we will also have to remove (or empty) /vendor/build.prop. All these seemed more complex and less intuitive than having a legacy prop that is dedicated for non-treble case. Technically, however, nothing prevents us from doing that. \n\nIf you are strong about removing /default.prop, I promise I will do that in a follow-up CL, cause I don\u0027t want to increase the extent of this change.",
      "parentUuid": "ae2a5436_96fc34eb",
      "range": {
        "startLine": 175,
        "startChar": 44,
        "endLine": 176,
        "endChar": 65
      },
      "revId": "f902d5c11e1e7cecf383350cdd052f72fd0027c0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49b757cb_29ce556d",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 176,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2020-05-13T18:01:57Z",
      "side": 1,
      "message": "For non-Treble:\n\nAre the vendor sysprops otherwise in /default.prop or in /vendor/build.prop?  Or is it conditional based on whether or not there is a vendor partition?\n\nIf we can end up with /system/build.prop + /vendor/build.prop that sounds good to me.  If otherwise we have /system/build.prop (with platform properties) + /default.prop (with vendor properties), then that seems like a worst situation than having /system/build.prop that contains all of these properties.  Especially since /default.prop is on system.img for all platforms as of a few releases ago, so there\u0027s no meaningful difference between root_dir and /system.\n\n\u003e If you are strong about removing /default.prop, I promise I will do that in a follow-up CL, cause I don\u0027t want to increase the extent of this change.\n\nI don\u0027t feel super strongly, and I do appreciate you taking care of this.  I just figure that if we are going to go this far to combine the files, then we might as well combine them in the other cases as well.  I get your point on not increasing the extent of this change, so I\u0027ll +2 here.",
      "parentUuid": "e9688ab8_b446fb00",
      "range": {
        "startLine": 175,
        "startChar": 44,
        "endLine": 176,
        "endChar": 65
      },
      "revId": "f902d5c11e1e7cecf383350cdd052f72fd0027c0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}