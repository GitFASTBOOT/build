{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "129c7394_38d1f48c",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1966697
      },
      "writtenOn": "2023-04-26T06:51:37Z",
      "side": 1,
      "message": "Do we need to remove ab_partitions.txt for all targets?",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02e4ba40_cffc86f1",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1999985
      },
      "writtenOn": "2023-04-26T07:42:39Z",
      "side": 1,
      "message": "In my opinion, it is a waste of time running CheckAbOtaImages twice along with add_img_to_target_files.\nFurthermore, someone may disable system.img/product.img from rebuilding in this step to reduce time. But the missing images will violate CheckAbOtaImages.\nSo I\u0027d like to remove it for all targets.",
      "parentUuid": "129c7394_38d1f48c",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "052f684c_81a55e48",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1966697
      },
      "writtenOn": "2023-04-26T09:55:45Z",
      "side": 1,
      "message": "What do you mean by doing `CheckAbOtaImages` twice? Are you saying calling from `rebuild_image_with_sepolicy` and `generate_missing_images`?",
      "parentUuid": "02e4ba40_cffc86f1",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41f4ccbf_1b23f088",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1999985
      },
      "writtenOn": "2023-04-27T01:47:03Z",
      "side": 1,
      "message": "Yes. Both of rebuild_image_with_sepolicy and generate_missing_images will call CheckAbOtaImages.",
      "parentUuid": "052f684c_81a55e48",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ebca07b_8c095833",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1966697
      },
      "writtenOn": "2023-04-27T02:31:57Z",
      "side": 1,
      "message": "I got it. But I think we should not skip `CheckAbOtaImages` by removing `ab_partitions.txt` since this makes `merge_target_files.py` and `add_img_to_target_files.py` depends on each other\u0027s implementation. A better way to do this might be adding an option `--skip_ab_ota_images_check` for `add_img_to_target_files.py`.",
      "parentUuid": "41f4ccbf_1b23f088",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28d36b2e_b05b4d72",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1999985
      },
      "writtenOn": "2023-04-27T03:01:57Z",
      "side": 1,
      "message": "OK. Let\u0027s handle CheckAbOtaImages in another CL.\nBut I don\u0027t think we can change add_img_to_target_files.py because the one used by rebuild_image_with_sepolicy is fronzed.",
      "parentUuid": "6ebca07b_8c095833",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "321d8c04_2811079d",
        "filename": "tools/releasetools/merge/merge_target_files.py",
        "patchSetId": 4
      },
      "lineNbr": 311,
      "author": {
        "id": 1966697
      },
      "writtenOn": "2023-04-27T17:00:01Z",
      "side": 1,
      "message": "Yeah maybe it\u0027s not working for GRF devices, but new devices can benefit from the improvement.",
      "parentUuid": "28d36b2e_b05b4d72",
      "range": {
        "startLine": 309,
        "startChar": 2,
        "endLine": 311,
        "endChar": 73
      },
      "revId": "688ac68c6995cee55527d4acfb0a7b029d8f7d17",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}