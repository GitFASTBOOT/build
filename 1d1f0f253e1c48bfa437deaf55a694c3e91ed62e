{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6770a6b9_b3f6f154",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1229,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-20T10:22:47Z",
      "side": 1,
      "message": "Any thoughts on how it\u0027s going to implement this check without doing so?",
      "range": {
        "startLine": 1228,
        "startChar": 2,
        "endLine": 1229,
        "endChar": 8
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "920a6d22_9406871d",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1229,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2021-05-20T17:02:01Z",
      "side": 1,
      "message": "For the Starlark-based configuration product configuration the assembly happens in _product_configuration function in core/product_config.rbc, lines 169-187. The code to do the checks can be added there, with diagnostics written to the same makefile that is generated by the changes in product_config.mk. I just need to figure out what exactly artifact path check is doing, artifact_path_requirements.mk has little documentation.",
      "parentUuid": "6770a6b9_b3f6f154",
      "range": {
        "startLine": 1228,
        "startChar": 2,
        "endLine": 1229,
        "endChar": 8
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e58ebcb_4e84362d",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1229,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-24T08:19:46Z",
      "side": 1,
      "message": "Happy to chat over VC if you want some explanations, or add a bunch of comments if you prefer. The short version:\n\nA product.mk can claim a particular path, e.g. /system on device. The build system will then enforce two things:\n- that product.mk actually only installs files in /system\n- that no product inheriting product.mk installs files  on /system other than the ones  product.mk is installing",
      "parentUuid": "920a6d22_9406871d",
      "range": {
        "startLine": 1228,
        "startChar": 2,
        "endLine": 1229,
        "endChar": 8
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "419b0f4e_cc8d8fe6",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1243,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-20T10:22:47Z",
      "side": 1,
      "message": "I was thinking you\u0027d change to get-product-var define itself based on RBC_PRODUCT_CONFIG. That would probably make product-graph less broken / not needing the disablement as well right?\n\nWould also make sense to print a $(warning) or something to make it more obvious to RBC_PRODUCT_CONFIG users the build results are not to be trusted",
      "range": {
        "startLine": 1242,
        "startChar": 25,
        "endLine": 1243,
        "endChar": 19
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57366ec4_ce740274",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1243,
      "author": {
        "id": 1000701
      },
      "writtenOn": "2021-05-20T13:05:49Z",
      "side": 1,
      "message": "I think a better option is to just not do the artifact_path_requirements check for now, when using RBC_PRODUCT_CONFIG.  At some point before it gets turned on for real, those checks can just be rewritten in starlark and it\u0027ll be way cleaner than re-including a different set of product files.",
      "parentUuid": "419b0f4e_cc8d8fe6",
      "range": {
        "startLine": 1242,
        "startChar": 25,
        "endLine": 1243,
        "endChar": 19
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be3ac925_0552c69b",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1243,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-20T13:25:48Z",
      "side": 1,
      "message": "\u003e just not do the artifact_path_requirements check for now\n\nThat is already the case with this CL (line 1361), but the macro is used in product-installed-files which is used regardless of artifact path checks",
      "parentUuid": "57366ec4_ce740274",
      "range": {
        "startLine": 1242,
        "startChar": 25,
        "endLine": 1243,
        "endChar": 19
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a38cb99_c8b147a3",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1243,
      "author": {
        "id": 1000701
      },
      "writtenOn": "2021-05-20T13:33:33Z",
      "side": 1,
      "message": "Without the artifact_path_requirements check though, product-installed-files is only used with INTERNAL_PRODUCT, right? This definitely changes the meaning of _product-var, but as a stopgap (with the TODO above especially), it should work?",
      "parentUuid": "be3ac925_0552c69b",
      "range": {
        "startLine": 1242,
        "startChar": 25,
        "endLine": 1243,
        "endChar": 19
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "348e309c_551954a4",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1243,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-20T13:43:22Z",
      "side": 1,
      "message": "Hmm yeah probably. Not clear to me why the change on line 1361 wasn\u0027t sufficient on its own",
      "parentUuid": "4a38cb99_c8b147a3",
      "range": {
        "startLine": 1242,
        "startChar": 25,
        "endLine": 1243,
        "endChar": 19
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b01ee055_e86f13c6",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1243,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2021-05-20T17:02:01Z",
      "side": 1,
      "message": "I have expanded the commit message to explain how this is tested, perhaps it will address your comments.",
      "parentUuid": "348e309c_551954a4",
      "range": {
        "startLine": 1242,
        "startChar": 25,
        "endLine": 1243,
        "endChar": 19
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ea0146e_8350de40",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1250,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-20T10:22:47Z",
      "side": 1,
      "message": "could you please indent this?",
      "range": {
        "startLine": 1241,
        "startChar": 0,
        "endLine": 1250,
        "endChar": 5
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fab1b776_bc81596d",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1250,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2021-05-20T17:02:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7ea0146e_8350de40",
      "range": {
        "startLine": 1241,
        "startChar": 0,
        "endLine": 1250,
        "endChar": 5
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba0a8ced_89b8dcc8",
        "filename": "core/main.mk",
        "patchSetId": 10
      },
      "lineNbr": 1250,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2021-05-20T17:02:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7ea0146e_8350de40",
      "range": {
        "startLine": 1241,
        "startChar": 0,
        "endLine": 1250,
        "endChar": 5
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6f91e2e_0a8849f2",
        "filename": "core/product_config.mk",
        "patchSetId": 10
      },
      "lineNbr": 214,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2021-05-20T10:22:47Z",
      "side": 1,
      "message": "indent",
      "range": {
        "startLine": 203,
        "startChar": 10,
        "endLine": 214,
        "endChar": 12
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a1a95a33_fcf42947",
        "filename": "core/product_config.mk",
        "patchSetId": 10
      },
      "lineNbr": 214,
      "author": {
        "id": 1344584
      },
      "writtenOn": "2021-05-20T17:02:01Z",
      "side": 1,
      "message": "Not sure which way, so removed it.",
      "parentUuid": "c6f91e2e_0a8849f2",
      "range": {
        "startLine": 203,
        "startChar": 10,
        "endLine": 214,
        "endChar": 12
      },
      "revId": "1d1f0f253e1c48bfa437deaf55a694c3e91ed62e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}