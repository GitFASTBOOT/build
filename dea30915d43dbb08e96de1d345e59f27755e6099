{
  "comments": [
    {
      "key": {
        "uuid": "e3b1613b_93aa30d4",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-09-23T08:33:52Z",
      "side": 1,
      "message": "Don\u0027t believe you need this to be here? false is the default",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ecda6e9c_f599f119",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2019-09-23T09:00:07Z",
      "side": 1,
      "message": "According to aosp/957100 I believe it\u0027s by default true.\nI modified this file from mainline_arm64/BoardConfig.mk, so I tried to keep the modification minimal. (So that the \"logic\" of this BoardConfig is same as mainline_arm64, only the arch is different)\n\nI think it\u0027s better if we change this line to:\n$(call inherit-product, $(SRC_TARGET_DIR)/product/updatable_apex.mk)\n\nthoughts?",
      "parentUuid": "e3b1613b_93aa30d4",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "322b5402_f9ef0672",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-09-23T09:23:11Z",
      "side": 1,
      "message": "ah sorry, got myself confused.\n\nIt actually was in BoardConfigMainlineCommon in AOSP prior to the Q -\u003e aosp push,. I do believe it needs to be added back there.. I think I originally moved it out of there because of emulator actually, so if that\u0027s no longer true, maybe we can just add it to BoardConfigMainlineCommon directly? GSI can override it to false.\n\nSee http://go/ag/7951568",
      "parentUuid": "ecda6e9c_f599f119",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1330ea1c_b1813e5e",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1128729
      },
      "writtenOn": "2019-09-23T10:09:35Z",
      "side": 1,
      "message": "How about just remove this \"TARGET_FLATTEN_APEX :\u003d false\" here?\nAnd all target could decide by \"updatable_apex.mk\".\nWe could add \"updatable_apex.mk\" into mainline_system_arm64.mk and mainline_system_x86.mk.",
      "parentUuid": "322b5402_f9ef0672",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be51e50a_d1557edd",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-09-23T10:25:59Z",
      "side": 1,
      "message": "The purpose of BoardConfigMainlineCommon is to collect all the settings that affect how the system image is compiled. TARGET_FLATTEN_APEX belongs in that set",
      "parentUuid": "1330ea1c_b1813e5e",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f58fa07_9476264e",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2019-09-23T10:58:10Z",
      "side": 1,
      "message": "I believe TARGET_FLATTEN_APEX defaults to true and this var is not meant to be set/unset directly?\nOne only override APEX flatness through updatable_apex.mk. It feels contradicted to set TARGET_FLATTEN_APEX to false in BoardConfigMainlineCommon, because\n1. Then the default value introduced in aosp/957100 is overridden\n2. BoardConfigGsiCommon.mk would have to unset TARGET_FLATTEN_APEX and sysprop ro.apex.updatable",
      "parentUuid": "be51e50a_d1557edd",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dac635df_649b9ad4",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-09-23T11:18:54Z",
      "side": 1,
      "message": "Yeah, flatteness should be controlled by inheriting or not inheriting updatable_apex.mk.\n\nThe distinction between product- or board- variables is very confusing to me. I wish we could have just one.",
      "parentUuid": "6f58fa07_9476264e",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9f492a0_da199a8a",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-09-23T12:19:54Z",
      "side": 1,
      "message": "- it would be better to have the build system automatically write the right value of the sysprop based on the value of TARGET_FLATTEN_APEX\n- I don\u0027t see why setting it in BoardConfigMainlineCommon would be a problem. We want to override the default. We can\u0027t set the prop in the board config though, because GSI would have no way to \"undo\" that.",
      "parentUuid": "dac635df_649b9ad4",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb8aaa06_4c426bbe",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2019-09-23T13:25:18Z",
      "side": 1,
      "message": "\u0027because GSI would have no way to \"undo\" that\u0027 this is why I think setting it in BoardConfigMainlineCommon would be a problem, other than that I don\u0027t see a problem too.\n\nI think letting the build system choose the sysprop automatically is more reasonable.",
      "parentUuid": "d9f492a0_da199a8a",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ab897ca_0092785a",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2019-09-23T13:29:00Z",
      "side": 1,
      "message": "Right, to clarify what I\u0027m suggesting is to:\n- put TARGET_FLATTEN_APEX in BoardConfigMainlineCommon instead of here\n- auto-write the sysprop in the build based on TARGET_FLATTEN_APEX",
      "parentUuid": "fb8aaa06_4c426bbe",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54eb4589_5a5f68f8",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2019-09-23T13:51:26Z",
      "side": 1,
      "message": "I agree. Let\u0027s see what +jiyong think. If he agree that it\u0027s better to let the build system auto-choose the sysprop, then I can prepare another CL to move TARGET_FLATTEN_APEX to BoardConfigMainlineCommon and phase out updatable_apex.mk.",
      "parentUuid": "6ab897ca_0092785a",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc41c0e0_12e49d0a",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1128729
      },
      "writtenOn": "2019-09-24T02:05:13Z",
      "side": 1,
      "message": "Agree. By comparing these two solutions, I prefer enable the feature by TARGET_FLATTEN_APEX instead of updatable_apex.mk.",
      "parentUuid": "54eb4589_5a5f68f8",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92ab7fd7_32c0903a",
        "filename": "target/board/mainline_x86/BoardConfig.mk",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-09-27T03:35:53Z",
      "side": 1,
      "message": "Sorry, I haven\u0027t followed this for a while. Can anyone tell me why updatable_apex.mk can\u0027t be used for this?",
      "parentUuid": "dc41c0e0_12e49d0a",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 35,
        "endChar": 28
      },
      "revId": "dea30915d43dbb08e96de1d345e59f27755e6099",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}