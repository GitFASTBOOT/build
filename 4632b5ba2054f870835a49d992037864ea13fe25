{
  "comments": [
    {
      "key": {
        "uuid": "4c16a522_f10c5ff9",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 1209,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "Will need to declare the dependency on tune2fs",
      "range": {
        "startLine": 1209,
        "startChar": 0,
        "endLine": 1209,
        "endChar": 24
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1d6cbcd_fdb56038",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 1209,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4c16a522_f10c5ff9",
      "range": {
        "startLine": 1209,
        "startChar": 0,
        "endLine": 1209,
        "endChar": 24
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "621970ee_58671bd1",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 3089,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "And add it to OTATOOLS (will be used when signing)",
      "range": {
        "startLine": 3089,
        "startChar": 0,
        "endLine": 3089,
        "endChar": 8
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb609955_716705f9",
        "filename": "core/Makefile",
        "patchSetId": 1
      },
      "lineNbr": 3089,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "621970ee_58671bd1",
      "range": {
        "startLine": 3089,
        "startChar": 0,
        "endLine": 3089,
        "endChar": 8
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8782a1bc_26d174eb",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "seems not available on macOS",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96a801ce_827f4c97",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T14:57:20Z",
      "side": 1,
      "message": "Portable variant for linux and MaxOS:\n\nBLOCKSIZE\u003d4096 du -s\n\n_nothing_ works for the Android toybox version, fortunately we do not need to use it.",
      "parentUuid": "8782a1bc_26d174eb",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ce307f5_bbb8c3ce",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "NB: for future we need to set BLOCKSIZE to prop_dict[\"squashfs_block_size\"] for squashfs, and if we ever add a blocksize argument for ext4.",
      "parentUuid": "96a801ce_827f4c97",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e02d1e5_fe3ea982",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2018-10-19T15:31:54Z",
      "side": 1,
      "message": "+enh, as we\u0027re looking into using toybox on the host.",
      "parentUuid": "96a801ce_827f4c97",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa918f46_04ea650f",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-10-19T16:01:34Z",
      "side": 1,
      "message": "use the POSIX -k option to get output in 1024-byte blocks, and multiply by 1024 instead?\n\n(that is worth explicitly doing, since there is broad disagreement about whether 512 or 1024 is right default.)\n\nbut there\u0027s no magic going on here... there\u0027s no secret access to the actual number of bytes. struct stat is in terms of 512-byte blocks, and any other answer you get is just a multiplication.",
      "parentUuid": "6e02d1e5_fe3ea982",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93ec3b6b_07d6c5c6",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T16:35:13Z",
      "side": 1,
      "message": "Ok, -k instead.\n\nBut so you understand why I _was_ doing this.\n\nIt is supposed to round up on each individual file. The du for SysVr3 in 1981 did so, I used it to prototype file systems for distribution, I never checked if this remained true on other *NIX variants since then, first time I cared is today. This produces a different sum than if rounding is done only on the total. Two files of 1 byte each should report a total of 12K (3 * 4096, including housing directory). du (back then) was also allowed to round up internally to either 512 or 4K minimum recognizing the page size of the system; alas POSIX specifies 512 today (if no block size is specified) to give a more consistent result.\n\nI only partially care if du does this or not, I add another 16MB of slop below (for zero reserved space condition) just in case it underestimates the size because it is doing the math as you propose. As such, if I chose `du -k` * 1024, everything should still really work ...\n\nI may care when we add squashfs since its blocksize is 128KB, because then du output might be considered as a lie and we will have to replace the tool (perhaps let python migrate through the directory itself to get a more accurate value). I have not started (and it is not a priority) on squashfs, the estimates with du is likely to be bogus anyways due to compression and the ability of squashfs to serialize the content and not be _really_ 128KB except for blacklisted uncompressed file(s).",
      "parentUuid": "fa918f46_04ea650f",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4ebfd50_107362a2",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T21:11:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "93ec3b6b_07d6c5c6",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e69849f8_e8c1bd6b",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-10-19T22:04:28Z",
      "side": 1,
      "message": "\u003e This produces a different sum than if rounding is done only on the total\n\ndoes it?\n\ndo you actually mean you were expecting it to use st_size rather than st_blocks? (which is the recently-added -A for BSD and --apparent-size for GNU.)",
      "parentUuid": "c4ebfd50_107362a2",
      "range": {
        "startLine": 65,
        "startChar": 15,
        "endLine": 65,
        "endChar": 19
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "392744d3_ca317cf0",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "should add a unittest into test_build_image.py, to ensure it\u0027s not silently broken due to tune2fs change",
      "range": {
        "startLine": 117,
        "startChar": 12,
        "endLine": 117,
        "endChar": 25
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c9f5c12_abe71b84",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "Will look into this ...",
      "parentUuid": "392744d3_ca317cf0",
      "range": {
        "startLine": 117,
        "startChar": 12,
        "endLine": 117,
        "endChar": 25
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bf3307e_4e6ace15",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T21:11:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6c9f5c12_abe71b84",
      "range": {
        "startLine": 117,
        "startChar": 12,
        "endLine": 117,
        "endChar": 25
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a041c2e9_8bc9a70e",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 121,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "looks bad to put everything into prop_dict. it\u0027s hard to tell what is really needed later.",
      "range": {
        "startLine": 121,
        "startChar": 6,
        "endLine": 121,
        "endChar": 15
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b2e104f_993677a6",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 121,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "will return and land the characteristics into fs_dict.",
      "parentUuid": "a041c2e9_8bc9a70e",
      "range": {
        "startLine": 121,
        "startChar": 6,
        "endLine": 121,
        "endChar": 15
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffc77dc4_972f5827",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "should skip or abort if this works on ext4 only",
      "range": {
        "startLine": 296,
        "startChar": 0,
        "endLine": 296,
        "endChar": 2
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "737ebb81_f6fd930e",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 296,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "We eventually need to also support \"squashfs\" as well (maybe others? msdosfs if we ever land firmware images in a dynamic partition?), setting this to an inode count default should not hurt? squashfs or f2fs of course do not need advance notice of the number of possible inodes.\n\nAgree, considering we do not support them today, we should skip.",
      "parentUuid": "ffc77dc4_972f5827",
      "range": {
        "startLine": 296,
        "startChar": 0,
        "endLine": 296,
        "endChar": 2
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9a3d078_213d428c",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 305,
      "author": {
        "id": 1056365
      },
      "writtenOn": "2018-10-18T23:21:18Z",
      "side": 1,
      "message": "\u003c\u003d",
      "range": {
        "startLine": 305,
        "startChar": 17,
        "endLine": 305,
        "endChar": 18
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9adebb4_848ad768",
        "filename": "tools/releasetools/build_image.py",
        "patchSetId": 1
      },
      "lineNbr": 305,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2018-10-19T15:30:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f9a3d078_213d428c",
      "range": {
        "startLine": 305,
        "startChar": 17,
        "endLine": 305,
        "endChar": 18
      },
      "revId": "4632b5ba2054f870835a49d992037864ea13fe25",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}