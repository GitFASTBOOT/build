{
  "comments": [
    {
      "key": {
        "uuid": "f53bcc38_6b169f0b",
        "filename": "core/binary.mk",
        "patchSetId": 2
      },
      "lineNbr": 1309,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-11T22:27:31Z",
      "side": 1,
      "message": "(same comment as in patchset 1)\n\nis there a common place I can call update-suite-host-shared-libraries after DEPENDENCIES_ON_SHARED_LIBRARIES is updated? It\u0027s updated in 3 places:\nbinary.mk\nprebuilt_internal.mk\nsoong_cc_prebuilt.mk\n\nFor now I have to call this in each mk file. I can\u0027t do it in base_rules (in section \"Compatibility suite files.\"), because the DEPENDENCIES_ON_SHARED_LIBRARIES is updated after that.",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2da6910_7d610230",
        "filename": "core/binary.mk",
        "patchSetId": 2
      },
      "lineNbr": 1309,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-11T23:00:18Z",
      "side": 1,
      "message": "You probably need it in each.  Make is a terrible language to work with, and copy-and-paste ends up being the best solution more often than not.  If there is a big block of identical code soemtimes its worth moving that out to its own .mk file and including it from the 3 locations.\n\nThe only code shared by those 3 files is in base_rules.mk, but that is much earlier before this data is available.",
      "parentUuid": "f53bcc38_6b169f0b",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c9199c3_7e6e360f",
        "filename": "core/binary.mk",
        "patchSetId": 2
      },
      "lineNbr": 1309,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T18:37:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b2da6910_7d610230",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e762b35_1f4effa8",
        "filename": "core/definitions.mk",
        "patchSetId": 2
      },
      "lineNbr": 3023,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-11T22:27:31Z",
      "side": 1,
      "message": "this is actually LOCAL_2ND_ARCH_VAR_PREFIX. Do I need use an argument or I can directly use this LOCAL_* variable inside the function body?",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70251289_5c2ff8e5",
        "filename": "core/definitions.mk",
        "patchSetId": 2
      },
      "lineNbr": 3023,
      "author": {
        "id": 1083173
      },
      "writtenOn": "2018-10-11T22:51:10Z",
      "side": 1,
      "message": "I think you can use the LOCAL... because other definitions do that in this file. They are all global variables.",
      "parentUuid": "2e762b35_1f4effa8",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0973cdf7_95f72983",
        "filename": "core/definitions.mk",
        "patchSetId": 2
      },
      "lineNbr": 3023,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-11T23:00:18Z",
      "side": 1,
      "message": "It depends, if the function is used in a rule then it can\u0027t use LOCAL_2ND_ARCH_VAR_PREFIX, it has to use a value local to the rule (something like PRIVATE_2ND_ARCH_VAR_PREFIX).\n\nIt\u0027s generally better to make things like this arguments instead of assuming a global variable is set, so I\u0027d suggest leaving it like this.",
      "parentUuid": "70251289_5c2ff8e5",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23f0632a_2700e111",
        "filename": "core/definitions.mk",
        "patchSetId": 2
      },
      "lineNbr": 3023,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T18:37:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0973cdf7_95f72983",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43d11e68_8caf01b0",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-15T21:38:36Z",
      "side": 1,
      "message": "You also need the src parts of $(COMPATIBILITY.device-tests.shared_lib.FILES) in the dependency list",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dee4d956_3ee3c1ce",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T23:22:22Z",
      "side": 1,
      "message": "That list is not a file list, instead it\u0027s a list of keyval like src:dest, will build supports that format?\nAnother issue is that the source path is for intermediate directory, build script will complain that there is no rule to build that.\n\nI tried the deps, build gives me an error:\nbuild/make/core/tasks/device-tests.mk:24: error: multiple target patterns",
      "parentUuid": "43d11e68_8caf01b0",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47fdd240_a75504d2",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T23:23:37Z",
      "side": 1,
      "message": "correction, the src part of $(COMPATIBILITY.device-tests.shared_lib.FILES) is for the intermediate dir, build complains there is no rule to build it.",
      "parentUuid": "dee4d956_3ee3c1ce",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8bbe5b39_e1640956",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-15T23:24:19Z",
      "side": 1,
      "message": "What do you mean \"for the intermediate dir\"?  Can you give an example?",
      "parentUuid": "47fdd240_a75504d2",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95bc2c4e_f7b3d243",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T23:35:45Z",
      "side": 1,
      "message": "like: target/product/vsoc_x86/obj/SHARED_LIBRARIES/libc.ndk.21_intermediates/libc.so\n\nI might made a mistake in the path earlier. Seems it\u0027s building now. I will know if it works in half an hour or so.",
      "parentUuid": "8bbe5b39_e1640956",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2cf3cb2a_83d7a0f1",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-16T04:18:43Z",
      "side": 1,
      "message": "m -j general-tests\n\nFAILED: ninja: \u0027out/host/linux-x86/obj/SHARED_LIBRARIES/libtraced_shared_intermediates/libtraced_shared.so\u0027, needed by \u0027out/target/product/vsoc_x86/general-tests.zip\u0027, missing and no known rule to make it\n\nso far there is one failure when building general-tests.zip\nBuilding device-tests is successful though.",
      "parentUuid": "95bc2c4e_f7b3d243",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69dbdd3e_eb94a48c",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-15T21:38:36Z",
      "side": 1,
      "message": "$(hide) is unnecessary now, just leave it out",
      "range": {
        "startLine": 26,
        "startChar": 1,
        "endLine": 26,
        "endChar": 9
      },
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "436cc348_16042278",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 26,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T23:22:22Z",
      "side": 1,
      "message": "remove this line. It\u0027s for debug.",
      "parentUuid": "69dbdd3e_eb94a48c",
      "range": {
        "startLine": 26,
        "startChar": 1,
        "endLine": 26,
        "endChar": 9
      },
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11ea81fb_22f9a3a4",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T18:37:56Z",
      "side": 1,
      "message": "There are 5 libraries don\u0027t exist in their intermediate folder, and failed to copy:\nlibcuttlefish_fs.so\nlibcuttlefish_strings.so\nthese 2 are shared libraries for adb_integration_test_adb. As the libraries are cuttlefish specific, I don\u0027t think I can add them to shared library of that module directly (not sure if that will even work).\n\nlibc.so\nlibm.so\nlibdl.so\nThese 3 are required by some python tests (py2-funcsigs-tests, tradefed_hello_world)\nI tried to add them to the Android.bp of each module, but they failed to build.\n\nThese related tests are currently in general-tests suite. One way to avoid the check is to remove these tests from general-tests suite.",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "063368f4_311a99cb",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-15T21:38:36Z",
      "side": 1,
      "message": "only put a tab as the first character on each line in the rule, indent the rest with spaces.",
      "range": {
        "startLine": 31,
        "startChar": 1,
        "endLine": 31,
        "endChar": 2
      },
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70060857_6033b8eb",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1002751
      },
      "writtenOn": "2018-10-15T21:38:36Z",
      "side": 1,
      "message": "Once you add the missing dependencies above I expect these will exist.",
      "parentUuid": "11ea81fb_22f9a3a4",
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "141e5780_a7b2affb",
        "filename": "core/tasks/device-tests.mk",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1088076
      },
      "writtenOn": "2018-10-15T23:22:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "063368f4_311a99cb",
      "range": {
        "startLine": 31,
        "startChar": 1,
        "endLine": 31,
        "endChar": 2
      },
      "revId": "85c9e1fe65e822653bb77bff757ffd5370c3bde6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}